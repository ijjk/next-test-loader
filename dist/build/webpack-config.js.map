{"version":3,"sources":["../../build/webpack-config.ts"],"names":["devtoolRevertWarning","devtool","console","warn","chalk","yellow","bold","parseJsonFile","filePath","JSON5","require","contents","trim","parse","err","codeFrame","String","start","line","lineNumber","column","columnNumber","message","highlightCode","Error","getOptimizedAliases","isServer","stubWindowFetch","path","join","__dirname","stubObjectAssign","shimAssign","Object","assign","unfetch$","url","resolve","attachReactRefresh","webpackConfig","targetLoader","injections","reactRefreshLoaderName","reactRefreshLoader","module","rules","forEach","rule","curr","use","Array","isArray","some","r","idx","findIndex","splice","Log","info","WEBPACK_RESOLVE_OPTIONS","dependencyType","symlinks","WEBPACK_ESM_RESOLVE_OPTIONS","NODE_RESOLVE_OPTIONS","modules","alias","fallback","exportsFields","importsFields","conditionNames","descriptionFiles","extensions","enforceExtensions","mainFields","mainFiles","roots","fullySpecified","preferRelative","preferAbsolute","restrictions","NODE_ESM_RESOLVE_OPTIONS","getBaseWebpackConfig","dir","buildId","config","dev","pagesDir","target","reactProductionProfiling","entrypoints","rewrites","isDevFallback","hasRewrites","beforeFiles","length","afterFiles","hasReactRefresh","reactDomVersion","cwd","name","hasReact18","Boolean","semver","gte","coerce","version","hasReactPrerelease","prerelease","hasReactRoot","experimental","reactRoot","babelConfigFile","reduce","memo","filename","configFilePath","undefined","Promise","distDir","babelLoader","isWebpack5","defaultLoaders","babel","loader","options","configFile","cache","development","hasJsxRuntime","hotSelfAccept","babelIncludeRegexes","nodePathList","process","env","NODE_PATH","split","platform","filter","p","isServerless","isServerlessTrace","isLikeServerless","outputDir","SERVERLESS_DIRECTORY","SERVER_DIRECTORY","outputPath","totalPages","keys","clientEntries","CLIENT_STATIC_FILES_RUNTIME_REACT_REFRESH","CLIENT_STATIC_FILES_RUNTIME_AMP","NEXT_PROJECT_ROOT_DIST_CLIENT","replace","CLIENT_STATIC_FILES_RUNTIME_MAIN","relative","CLIENT_STATIC_FILES_RUNTIME_POLYFILLS","typeScriptPath","paths","_","tsConfigPath","useTypeScript","jsConfig","ts","tsConfig","compilerOptions","jsConfigPath","resolvedBaseUrl","baseUrl","getReactProfilingInProduction","clientResolveRewrites","clientResolveRewritesNoop","resolveConfig","next","NEXT_PROJECT_ROOT","PAGES_DIR_ALIAS","DOT_NEXT_ALIAS","assert","buffer","constants","crypto","domain","http","https","os","punycode","querystring","stream","string_decoder","sys","timers","tty","util","vm","zlib","plugins","terserOptions","ecma","compress","warnings","comparisons","inline","mangle","safari10","output","comments","ascii_only","isModuleCSS","type","splitChunksConfigs","cacheGroups","default","vendors","prodGranular","chunks","chunk","test","framework","priority","enforce","lib","size","nameForCondition","hash","createHash","updateHash","libIdent","update","context","digest","substring","minChunks","reuseExistingChunk","commons","shared","acc","maxInitialRequests","minSize","splitChunksConfig","crossOrigin","customAppFile","pageExtensions","conformanceConfig","ReactSyncScriptsConformanceCheck","enabled","MinificationConformanceCheck","DuplicatePolyfillsConformanceCheck","BlockedAPIToBePolyfilled","conformance","GranularChunksConformanceCheck","esmExternals","looseEsmExternals","handleExternals","request","getResolve","isLocal","startsWith","posix","isAbsolute","win32","notExternalModules","isEsmRequested","preferEsm","res","isEsm","resolveAlternative","isNextExternal","externalRequest","baseRes","baseIsEsm","baseResolve","externalType","match","emacsLockfilePattern","externals","resolveFunction","resolveContext","requestToResolve","reject","result","resolveData","descriptionFileData","callback","then","optimizeCss","optimization","emitOnErrors","noEmitOnErrors","checkWasmTypes","nodeEnv","splitChunks","runtimeChunk","CLIENT_STATIC_FILES_RUNTIME_WEBPACK","minimize","minimizer","compiler","TerserPlugin","cacheDir","parallel","cpus","apply","CssMinimizerPlugin","postcssOptions","map","annotation","node","setImmediate","entry","watchOptions","aggregateTimeout","ignored","publicPath","assetPrefix","library","libraryTarget","hotUpdateChunkFilename","hotUpdateMainFilename","chunkFilename","strictModuleExceptionHandling","crossOriginLoading","futureEmitAssets","webassemblyModuleFilename","performance","resolveLoader","externalDir","include","exclude","excludePath","images","disableStaticImages","issuer","not","regexLikeCss","dependency","isDev","ReactRefreshWebpackPlugin","webpack","ProvidePlugin","Buffer","ChunkNamesPlugin","DefinePlugin","prev","key","JSON","stringify","__NEXT_TEST_MODE","trailingSlash","devIndicators","buildActivity","reactStrictMode","optimizeFonts","optimizeImages","scrollRestoration","deviceSizes","imageSizes","domains","basePath","i18n","analyticsId","pageEnv","ReactLoadablePlugin","REACT_LOADABLE_MANIFEST","DropClientPage","excludeDefaultMomentLocales","IgnorePlugin","resourceRegExp","contextRegExp","NextJsRequireCacheHotReloader","devPlugins","push","HotModuleReplacementPlugin","HashedModuleIdsPlugin","ServerlessPlugin","PagesManifestPlugin","serverless","NextJsSSRModuleCachePlugin","NextJsSsrImportPlugin","BuildManifestPlugin","stats","BuildStatsPlugin","ProfilingPlugin","FontStylesheetGatheringPlugin","WebpackConformancePlugin","tests","AllowedSources","allowedSources","WellKnownErrorsPlugin","unshift","JsConfigPathsPlugin","dependencies","snapshot","versions","pnp","exec","managedPaths","immutablePaths","providedExports","usedExports","configVars","reactMode","disableOptimizedLoading","__NEXT_VERSION","cacheDirectory","buildDependencies","NEXT_WEBPACK_LOGGING","logInfra","includes","logProfileClient","logProfileServer","logDefault","infrastructureLogging","level","debug","hooks","done","tap","log","toString","colors","logging","ProgressPlugin","profile","rootDirectory","isDevelopment","sassOptions","productionBrowserSourceMaps","future","isCraCompat","craCompat","originalDevtool","hasCustomSvg","RegExp","nextImageRule","find","fileLoaderExclude","fileLoader","generator","topRules","innerRules","oneOf","resource","webpackDevMiddleware","canMatchCss","fileNames","input","hasUserCssConfig","__next_css_remove","e","strictPostcssConfiguration","foundTsRule","call","isSass","source","isLess","isCss","isStylus","prototype","hasOwnProperty","correctNextCss","correctCssLoader","originalEntry","updatedEntry","originalFile","dependOn","old","import"],"mappings":"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","sourcesContent":["import ReactRefreshWebpackPlugin from '@next/react-refresh-utils/ReactRefreshWebpackPlugin'\nimport chalk from 'chalk'\nimport crypto from 'crypto'\nimport { readFileSync } from 'fs'\nimport { codeFrameColumns } from 'next/dist/compiled/babel/code-frame'\nimport semver from 'next/dist/compiled/semver'\nimport { isWebpack5, webpack } from 'next/dist/compiled/webpack/webpack'\nimport path, { join as pathJoin, relative as relativePath } from 'path'\nimport {\n  DOT_NEXT_ALIAS,\n  NEXT_PROJECT_ROOT,\n  NEXT_PROJECT_ROOT_DIST_CLIENT,\n  PAGES_DIR_ALIAS,\n} from '../lib/constants'\nimport { fileExists } from '../lib/file-exists'\nimport { getPackageVersion } from '../lib/get-package-version'\nimport { CustomRoutes } from '../lib/load-custom-routes.js'\nimport { getTypeScriptConfiguration } from '../lib/typescript/getTypeScriptConfiguration'\nimport {\n  CLIENT_STATIC_FILES_RUNTIME_AMP,\n  CLIENT_STATIC_FILES_RUNTIME_MAIN,\n  CLIENT_STATIC_FILES_RUNTIME_POLYFILLS,\n  CLIENT_STATIC_FILES_RUNTIME_REACT_REFRESH,\n  CLIENT_STATIC_FILES_RUNTIME_WEBPACK,\n  REACT_LOADABLE_MANIFEST,\n  SERVERLESS_DIRECTORY,\n  SERVER_DIRECTORY,\n} from '../shared/lib/constants'\nimport { execOnce } from '../shared/lib/utils'\nimport { NextConfigComplete } from '../server/config-shared'\nimport { findPageFile } from '../server/lib/find-page-file'\nimport { WebpackEntrypoints } from './entries'\nimport * as Log from './output/log'\nimport { build as buildConfiguration } from './webpack/config'\nimport { __overrideCssConfiguration } from './webpack/config/blocks/css/overrideCssConfiguration'\nimport BuildManifestPlugin from './webpack/plugins/build-manifest-plugin'\nimport BuildStatsPlugin from './webpack/plugins/build-stats-plugin'\nimport ChunkNamesPlugin from './webpack/plugins/chunk-names-plugin'\nimport { JsConfigPathsPlugin } from './webpack/plugins/jsconfig-paths-plugin'\nimport { DropClientPage } from './webpack/plugins/next-drop-client-page-plugin'\nimport NextJsSsrImportPlugin from './webpack/plugins/nextjs-ssr-import'\nimport NextJsSSRModuleCachePlugin from './webpack/plugins/nextjs-ssr-module-cache'\nimport PagesManifestPlugin from './webpack/plugins/pages-manifest-plugin'\nimport { ProfilingPlugin } from './webpack/plugins/profiling-plugin'\nimport { ReactLoadablePlugin } from './webpack/plugins/react-loadable-plugin'\nimport { ServerlessPlugin } from './webpack/plugins/serverless-plugin'\nimport WebpackConformancePlugin, {\n  DuplicatePolyfillsConformanceCheck,\n  GranularChunksConformanceCheck,\n  MinificationConformanceCheck,\n  ReactSyncScriptsConformanceCheck,\n} from './webpack/plugins/webpack-conformance-plugin'\nimport { WellKnownErrorsPlugin } from './webpack/plugins/wellknown-errors-plugin'\nimport { regexLikeCss } from './webpack/config/blocks/css'\n\ntype ExcludesFalse = <T>(x: T | false) => x is T\n\nconst devtoolRevertWarning = execOnce(\n  (devtool: webpack.Configuration['devtool']) => {\n    console.warn(\n      chalk.yellow.bold('Warning: ') +\n        chalk.bold(`Reverting webpack devtool to '${devtool}'.\\n`) +\n        'Changing the webpack devtool in development mode will cause severe performance regressions.\\n' +\n        'Read more: https://nextjs.org/docs/messages/improper-devtool'\n    )\n  }\n)\n\nfunction parseJsonFile(filePath: string) {\n  const JSON5 = require('next/dist/compiled/json5')\n  const contents = readFileSync(filePath, 'utf8')\n\n  // Special case an empty file\n  if (contents.trim() === '') {\n    return {}\n  }\n\n  try {\n    return JSON5.parse(contents)\n  } catch (err) {\n    const codeFrame = codeFrameColumns(\n      String(contents),\n      { start: { line: err.lineNumber, column: err.columnNumber } },\n      { message: err.message, highlightCode: true }\n    )\n    throw new Error(`Failed to parse \"${filePath}\":\\n${codeFrame}`)\n  }\n}\n\nfunction getOptimizedAliases(isServer: boolean): { [pkg: string]: string } {\n  if (isServer) {\n    return {}\n  }\n\n  const stubWindowFetch = path.join(__dirname, 'polyfills', 'fetch', 'index.js')\n  const stubObjectAssign = path.join(__dirname, 'polyfills', 'object-assign.js')\n\n  const shimAssign = path.join(__dirname, 'polyfills', 'object.assign')\n  return Object.assign(\n    {},\n    {\n      unfetch$: stubWindowFetch,\n      'isomorphic-unfetch$': stubWindowFetch,\n      'whatwg-fetch$': path.join(\n        __dirname,\n        'polyfills',\n        'fetch',\n        'whatwg-fetch.js'\n      ),\n    },\n    {\n      'object-assign$': stubObjectAssign,\n\n      // Stub Package: object.assign\n      'object.assign/auto': path.join(shimAssign, 'auto.js'),\n      'object.assign/implementation': path.join(\n        shimAssign,\n        'implementation.js'\n      ),\n      'object.assign$': path.join(shimAssign, 'index.js'),\n      'object.assign/polyfill': path.join(shimAssign, 'polyfill.js'),\n      'object.assign/shim': path.join(shimAssign, 'shim.js'),\n\n      // Replace: full URL polyfill with platform-based polyfill\n      url: require.resolve('native-url'),\n    }\n  )\n}\n\ntype ClientEntries = {\n  [key: string]: string | string[]\n}\n\nexport function attachReactRefresh(\n  webpackConfig: webpack.Configuration,\n  targetLoader: webpack.RuleSetUseItem\n) {\n  let injections = 0\n  const reactRefreshLoaderName = '@next/react-refresh-utils/loader'\n  const reactRefreshLoader = require.resolve(reactRefreshLoaderName)\n  webpackConfig.module?.rules.forEach((rule) => {\n    const curr = rule.use\n    // When the user has configured `defaultLoaders.babel` for a input file:\n    if (curr === targetLoader) {\n      ++injections\n      rule.use = [reactRefreshLoader, curr as webpack.RuleSetUseItem]\n    } else if (\n      Array.isArray(curr) &&\n      curr.some((r) => r === targetLoader) &&\n      // Check if loader already exists:\n      !curr.some(\n        (r) => r === reactRefreshLoader || r === reactRefreshLoaderName\n      )\n    ) {\n      ++injections\n      const idx = curr.findIndex((r) => r === targetLoader)\n      // Clone to not mutate user input\n      rule.use = [...curr]\n\n      // inject / input: [other, babel] output: [other, refresh, babel]:\n      rule.use.splice(idx, 0, reactRefreshLoader)\n    }\n  })\n\n  if (injections) {\n    Log.info(\n      `automatically enabled Fast Refresh for ${injections} custom loader${\n        injections > 1 ? 's' : ''\n      }`\n    )\n  }\n}\n\nconst WEBPACK_RESOLVE_OPTIONS = {\n  // This always uses commonjs resolving, assuming API is identical\n  // between ESM and CJS in a package\n  // Otherwise combined ESM+CJS packages will never be external\n  // as resolving mismatch would lead to opt-out from being external.\n  dependencyType: 'commonjs',\n  symlinks: true,\n}\n\nconst WEBPACK_ESM_RESOLVE_OPTIONS = {\n  dependencyType: 'esm',\n  symlinks: true,\n}\n\nconst NODE_RESOLVE_OPTIONS = {\n  dependencyType: 'commonjs',\n  modules: ['node_modules'],\n  alias: false,\n  fallback: false,\n  exportsFields: ['exports'],\n  importsFields: ['imports'],\n  conditionNames: ['node', 'require', 'module'],\n  descriptionFiles: ['package.json'],\n  extensions: ['.js', '.json', '.node'],\n  enforceExtensions: false,\n  symlinks: true,\n  mainFields: ['main'],\n  mainFiles: ['index'],\n  roots: [],\n  fullySpecified: false,\n  preferRelative: false,\n  preferAbsolute: false,\n  restrictions: [],\n}\n\nconst NODE_ESM_RESOLVE_OPTIONS = {\n  ...NODE_RESOLVE_OPTIONS,\n  dependencyType: 'esm',\n  conditionNames: ['node', 'import', 'module'],\n  fullySpecified: true,\n}\n\nexport default async function getBaseWebpackConfig(\n  dir: string,\n  {\n    buildId,\n    config,\n    dev = false,\n    isServer = false,\n    pagesDir,\n    target = 'server',\n    reactProductionProfiling = false,\n    entrypoints,\n    rewrites,\n    isDevFallback = false,\n  }: {\n    buildId: string\n    config: NextConfigComplete\n    dev?: boolean\n    isServer?: boolean\n    pagesDir: string\n    target?: string\n    reactProductionProfiling?: boolean\n    entrypoints: WebpackEntrypoints\n    rewrites: CustomRoutes['rewrites']\n    isDevFallback?: boolean\n  }\n): Promise<webpack.Configuration> {\n  const hasRewrites =\n    rewrites.beforeFiles.length > 0 ||\n    rewrites.afterFiles.length > 0 ||\n    rewrites.fallback.length > 0\n  const hasReactRefresh: boolean = dev && !isServer\n  const reactDomVersion = await getPackageVersion({\n    cwd: dir,\n    name: 'react-dom',\n  })\n  const hasReact18: boolean =\n    Boolean(reactDomVersion) &&\n    (semver.gte(reactDomVersion!, '18.0.0') ||\n      semver.coerce(reactDomVersion)?.version === '18.0.0')\n  const hasReactPrerelease =\n    Boolean(reactDomVersion) && semver.prerelease(reactDomVersion!) != null\n  const hasReactRoot: boolean = config.experimental.reactRoot || hasReact18\n\n  // Only inform during one of the builds\n  if (!isServer) {\n    if (hasReactRoot) {\n      Log.info('Using the createRoot API for React')\n    }\n    if (hasReactPrerelease) {\n      Log.warn(\n        `You are using an unsupported prerelease of 'react-dom' which may cause ` +\n          `unexpected or broken application behavior. Continue at your own risk.`\n      )\n    }\n  }\n\n  const babelConfigFile = await [\n    '.babelrc',\n    '.babelrc.json',\n    '.babelrc.js',\n    '.babelrc.mjs',\n    '.babelrc.cjs',\n    'babel.config.js',\n    'babel.config.json',\n    'babel.config.mjs',\n    'babel.config.cjs',\n  ].reduce(async (memo: Promise<string | undefined>, filename) => {\n    const configFilePath = path.join(dir, filename)\n    return (\n      (await memo) ||\n      ((await fileExists(configFilePath)) ? configFilePath : undefined)\n    )\n  }, Promise.resolve(undefined))\n\n  const distDir = path.join(dir, config.distDir)\n\n  // Webpack 5 can use the faster babel loader, webpack 5 has built-in caching for loaders\n  // For webpack 4 the old loader is used as it has external caching\n  const babelLoader = isWebpack5\n    ? require.resolve('./babel/loader/index')\n    : 'next-babel-loader'\n  const defaultLoaders = {\n    babel: {\n      loader: babelLoader,\n      options: {\n        configFile: babelConfigFile,\n        isServer,\n        distDir,\n        pagesDir,\n        cwd: dir,\n        // Webpack 5 has a built-in loader cache\n        cache: !isWebpack5,\n        development: dev,\n        hasReactRefresh,\n        hasJsxRuntime: true,\n      },\n    },\n    // Backwards compat\n    hotSelfAccept: {\n      loader: 'noop-loader',\n    },\n  }\n\n  const babelIncludeRegexes: RegExp[] = [\n    /next[\\\\/]dist[\\\\/]shared[\\\\/]lib/,\n    /next[\\\\/]dist[\\\\/]client/,\n    /next[\\\\/]dist[\\\\/]pages/,\n    /[\\\\/](strip-ansi|ansi-regex)[\\\\/]/,\n  ]\n\n  // Support for NODE_PATH\n  const nodePathList = (process.env.NODE_PATH || '')\n    .split(process.platform === 'win32' ? ';' : ':')\n    .filter((p) => !!p)\n\n  const isServerless = target === 'serverless'\n  const isServerlessTrace = target === 'experimental-serverless-trace'\n  // Intentionally not using isTargetLikeServerless helper\n  const isLikeServerless = isServerless || isServerlessTrace\n\n  const outputDir = isLikeServerless ? SERVERLESS_DIRECTORY : SERVER_DIRECTORY\n  const outputPath = path.join(distDir, isServer ? outputDir : '')\n  const totalPages = Object.keys(entrypoints).length\n  const clientEntries = !isServer\n    ? ({\n        // Backwards compatibility\n        'main.js': [],\n        ...(dev\n          ? {\n              [CLIENT_STATIC_FILES_RUNTIME_REACT_REFRESH]: require.resolve(\n                `@next/react-refresh-utils/runtime`\n              ),\n              [CLIENT_STATIC_FILES_RUNTIME_AMP]:\n                `./` +\n                relativePath(\n                  dir,\n                  pathJoin(NEXT_PROJECT_ROOT_DIST_CLIENT, 'dev', 'amp-dev')\n                ).replace(/\\\\/g, '/'),\n            }\n          : {}),\n        [CLIENT_STATIC_FILES_RUNTIME_MAIN]:\n          `./` +\n          path\n            .relative(\n              dir,\n              path.join(\n                NEXT_PROJECT_ROOT_DIST_CLIENT,\n                dev ? `next-dev.js` : 'next.js'\n              )\n            )\n            .replace(/\\\\/g, '/'),\n        [CLIENT_STATIC_FILES_RUNTIME_POLYFILLS]: path.join(\n          NEXT_PROJECT_ROOT_DIST_CLIENT,\n          'polyfills.js'\n        ),\n      } as ClientEntries)\n    : undefined\n\n  let typeScriptPath: string | undefined\n  try {\n    typeScriptPath = require.resolve('typescript', { paths: [dir] })\n  } catch (_) {}\n  const tsConfigPath = path.join(dir, 'tsconfig.json')\n  const useTypeScript = Boolean(\n    typeScriptPath && (await fileExists(tsConfigPath))\n  )\n\n  let jsConfig\n  // jsconfig is a subset of tsconfig\n  if (useTypeScript) {\n    const ts = (await import(typeScriptPath!)) as typeof import('typescript')\n    const tsConfig = await getTypeScriptConfiguration(ts, tsConfigPath, true)\n    jsConfig = { compilerOptions: tsConfig.options }\n  }\n\n  const jsConfigPath = path.join(dir, 'jsconfig.json')\n  if (!useTypeScript && (await fileExists(jsConfigPath))) {\n    jsConfig = parseJsonFile(jsConfigPath)\n  }\n\n  let resolvedBaseUrl\n  if (jsConfig?.compilerOptions?.baseUrl) {\n    resolvedBaseUrl = path.resolve(dir, jsConfig.compilerOptions.baseUrl)\n  }\n\n  function getReactProfilingInProduction() {\n    if (reactProductionProfiling) {\n      return {\n        'react-dom$': 'react-dom/profiling',\n        'scheduler/tracing': 'scheduler/tracing-profiling',\n      }\n    }\n  }\n\n  const clientResolveRewrites = require.resolve(\n    '../shared/lib/router/utils/resolve-rewrites'\n  )\n  const clientResolveRewritesNoop = require.resolve(\n    '../shared/lib/router/utils/resolve-rewrites-noop'\n  )\n\n  const resolveConfig = {\n    // Disable .mjs for node_modules bundling\n    extensions: isServer\n      ? [\n          '.js',\n          '.mjs',\n          ...(useTypeScript ? ['.tsx', '.ts'] : []),\n          '.jsx',\n          '.json',\n          '.wasm',\n        ]\n      : [\n          '.mjs',\n          '.js',\n          ...(useTypeScript ? ['.tsx', '.ts'] : []),\n          '.jsx',\n          '.json',\n          '.wasm',\n        ],\n    modules: [\n      'node_modules',\n      ...nodePathList, // Support for NODE_PATH environment variable\n    ],\n    alias: {\n      next: NEXT_PROJECT_ROOT,\n      [PAGES_DIR_ALIAS]: pagesDir,\n      [DOT_NEXT_ALIAS]: distDir,\n      ...getOptimizedAliases(isServer),\n      ...getReactProfilingInProduction(),\n      [clientResolveRewrites]: hasRewrites\n        ? clientResolveRewrites\n        : // With webpack 5 an alias can be pointed to false to noop\n        isWebpack5\n        ? false\n        : clientResolveRewritesNoop,\n    },\n    ...(isWebpack5 && !isServer\n      ? {\n          // Full list of old polyfills is accessible here:\n          // https://github.com/webpack/webpack/blob/2a0536cf510768111a3a6dceeb14cb79b9f59273/lib/ModuleNotFoundError.js#L13-L42\n          fallback: {\n            assert: require.resolve('assert/'),\n            buffer: require.resolve('buffer/'),\n            constants: require.resolve('constants-browserify'),\n            crypto: require.resolve('crypto-browserify'),\n            domain: require.resolve('domain-browser'),\n            http: require.resolve('stream-http'),\n            https: require.resolve('https-browserify'),\n            os: require.resolve('os-browserify/browser'),\n            path: require.resolve('path-browserify'),\n            punycode: require.resolve('punycode'),\n            process: require.resolve('process/browser'),\n            // Handled in separate alias\n            querystring: require.resolve('querystring-es3'),\n            stream: require.resolve('stream-browserify'),\n            string_decoder: require.resolve('string_decoder'),\n            sys: require.resolve('util/'),\n            timers: require.resolve('timers-browserify'),\n            tty: require.resolve('tty-browserify'),\n            // Handled in separate alias\n            // url: require.resolve('url/'),\n            util: require.resolve('util/'),\n            vm: require.resolve('vm-browserify'),\n            zlib: require.resolve('browserify-zlib'),\n          },\n        }\n      : undefined),\n    mainFields: isServer ? ['main', 'module'] : ['browser', 'module', 'main'],\n    plugins: isWebpack5\n      ? // webpack 5+ has the PnP resolver built-in by default:\n        []\n      : [require('pnp-webpack-plugin')],\n  }\n\n  const terserOptions: any = {\n    parse: {\n      ecma: 8,\n    },\n    compress: {\n      ecma: 5,\n      warnings: false,\n      // The following two options are known to break valid JavaScript code\n      comparisons: false,\n      inline: 2, // https://github.com/vercel/next.js/issues/7178#issuecomment-493048965\n    },\n    mangle: { safari10: true },\n    output: {\n      ecma: 5,\n      safari10: true,\n      comments: false,\n      // Fixes usage of Emoji and certain Regex\n      ascii_only: true,\n    },\n  }\n\n  const isModuleCSS = (module: { type: string }): boolean => {\n    return (\n      // mini-css-extract-plugin\n      module.type === `css/mini-extract` ||\n      // extract-css-chunks-webpack-plugin (old)\n      module.type === `css/extract-chunks` ||\n      // extract-css-chunks-webpack-plugin (new)\n      module.type === `css/extract-css-chunks`\n    )\n  }\n\n  // Contains various versions of the Webpack SplitChunksPlugin used in different build types\n  const splitChunksConfigs: {\n    [propName: string]: webpack.Options.SplitChunksOptions | false\n  } = {\n    dev: {\n      cacheGroups: {\n        default: false,\n        vendors: false,\n      },\n    },\n    prodGranular: {\n      // Keep main and _app chunks unsplitted in webpack 5\n      // as we don't need a separate vendor chunk from that\n      // and all other chunk depend on them so there is no\n      // duplication that need to be pulled out.\n      chunks: isWebpack5\n        ? (chunk) => !/^(polyfills|main|pages\\/_app)$/.test(chunk.name)\n        : 'all',\n      cacheGroups: {\n        framework: {\n          chunks: 'all',\n          name: 'framework',\n          // This regex ignores nested copies of framework libraries so they're\n          // bundled with their issuer.\n          // https://github.com/vercel/next.js/pull/9012\n          test: /(?<!node_modules.*)[\\\\/]node_modules[\\\\/](react|react-dom|scheduler|prop-types|use-subscription)[\\\\/]/,\n          priority: 40,\n          // Don't let webpack eliminate this chunk (prevents this chunk from\n          // becoming a part of the commons chunk)\n          enforce: true,\n        },\n        lib: {\n          test(module: {\n            size: Function\n            nameForCondition: Function\n          }): boolean {\n            return (\n              module.size() > 160000 &&\n              /node_modules[/\\\\]/.test(module.nameForCondition() || '')\n            )\n          },\n          name(module: {\n            type: string\n            libIdent?: Function\n            updateHash: (hash: crypto.Hash) => void\n          }): string {\n            const hash = crypto.createHash('sha1')\n            if (isModuleCSS(module)) {\n              module.updateHash(hash)\n            } else {\n              if (!module.libIdent) {\n                throw new Error(\n                  `Encountered unknown module type: ${module.type}. Please open an issue.`\n                )\n              }\n\n              hash.update(module.libIdent({ context: dir }))\n            }\n\n            return hash.digest('hex').substring(0, 8)\n          },\n          priority: 30,\n          minChunks: 1,\n          reuseExistingChunk: true,\n        },\n        commons: {\n          name: 'commons',\n          minChunks: totalPages,\n          priority: 20,\n        },\n        ...(isWebpack5\n          ? undefined\n          : {\n              default: false,\n              vendors: false,\n              shared: {\n                name(module, chunks) {\n                  return (\n                    crypto\n                      .createHash('sha1')\n                      .update(\n                        chunks.reduce(\n                          (acc: string, chunk: webpack.compilation.Chunk) => {\n                            return acc + chunk.name\n                          },\n                          ''\n                        )\n                      )\n                      .digest('hex') + (isModuleCSS(module) ? '_CSS' : '')\n                  )\n                },\n                priority: 10,\n                minChunks: 2,\n                reuseExistingChunk: true,\n              },\n            }),\n      },\n      maxInitialRequests: 25,\n      minSize: 20000,\n    },\n  }\n\n  // Select appropriate SplitChunksPlugin config for this build\n  let splitChunksConfig: webpack.Options.SplitChunksOptions | false\n  if (dev) {\n    splitChunksConfig = isWebpack5 ? false : splitChunksConfigs.dev\n  } else {\n    splitChunksConfig = splitChunksConfigs.prodGranular\n  }\n\n  const crossOrigin = config.crossOrigin\n\n  let customAppFile: string | null = await findPageFile(\n    pagesDir,\n    '/_app',\n    config.pageExtensions\n  )\n  if (customAppFile) {\n    customAppFile = path.resolve(path.join(pagesDir, customAppFile))\n  }\n\n  const conformanceConfig = Object.assign(\n    {\n      ReactSyncScriptsConformanceCheck: {\n        enabled: true,\n      },\n      MinificationConformanceCheck: {\n        enabled: true,\n      },\n      DuplicatePolyfillsConformanceCheck: {\n        enabled: true,\n        BlockedAPIToBePolyfilled: Object.assign(\n          [],\n          ['fetch'],\n          config.conformance?.DuplicatePolyfillsConformanceCheck\n            ?.BlockedAPIToBePolyfilled || []\n        ),\n      },\n      GranularChunksConformanceCheck: {\n        enabled: true,\n      },\n    },\n    config.conformance\n  )\n\n  const esmExternals = !!config.experimental?.esmExternals\n  const looseEsmExternals = config.experimental?.esmExternals === 'loose'\n\n  async function handleExternals(\n    context: string,\n    request: string,\n    dependencyType: string,\n    getResolve: (\n      options: any\n    ) => (\n      resolveContext: string,\n      resolveRequest: string\n    ) => Promise<[string | null, boolean]>\n  ) {\n    // We need to externalize internal requests for files intended to\n    // not be bundled.\n\n    const isLocal: boolean =\n      request.startsWith('.') ||\n      // Always check for unix-style path, as webpack sometimes\n      // normalizes as posix.\n      path.posix.isAbsolute(request) ||\n      // When on Windows, we also want to check for Windows-specific\n      // absolute paths.\n      (process.platform === 'win32' && path.win32.isAbsolute(request))\n\n    // Relative requires don't need custom resolution, because they\n    // are relative to requests we've already resolved here.\n    // Absolute requires (require('/foo')) are extremely uncommon, but\n    // also have no need for customization as they're already resolved.\n    if (!isLocal) {\n      if (/^(?:next$|react(?:$|\\/))/.test(request)) {\n        return `commonjs ${request}`\n      }\n\n      const notExternalModules = /^(?:private-next-pages\\/|next\\/(?:dist\\/pages\\/|(?:app|document|link|image|constants)$)|string-hash$)/\n      if (notExternalModules.test(request)) {\n        return\n      }\n    }\n\n    // When in esm externals mode, and using import, we resolve with\n    // ESM resolving options.\n    const isEsmRequested = dependencyType === 'esm'\n    const preferEsm = esmExternals && isEsmRequested\n\n    const resolve = getResolve(\n      preferEsm ? WEBPACK_ESM_RESOLVE_OPTIONS : WEBPACK_RESOLVE_OPTIONS\n    )\n\n    // Resolve the import with the webpack provided context, this\n    // ensures we're resolving the correct version when multiple\n    // exist.\n    let res: string | null\n    let isEsm: boolean = false\n    try {\n      ;[res, isEsm] = await resolve(context, request)\n    } catch (err) {\n      res = null\n    }\n\n    // If resolving fails, and we can use an alternative way\n    // try the alternative resolving options.\n    if (!res && (isEsmRequested || looseEsmExternals)) {\n      const resolveAlternative = getResolve(\n        preferEsm ? WEBPACK_RESOLVE_OPTIONS : WEBPACK_ESM_RESOLVE_OPTIONS\n      )\n      try {\n        ;[res, isEsm] = await resolveAlternative(context, request)\n      } catch (err) {\n        res = null\n      }\n    }\n\n    // If the request cannot be resolved we need to have\n    // webpack \"bundle\" it so it surfaces the not found error.\n    if (!res) {\n      return\n    }\n\n    // ESM externals can only be imported (and not required).\n    // Make an exception in loose mode.\n    if (!isEsmRequested && isEsm && !looseEsmExternals) {\n      throw new Error(\n        `ESM packages (${request}) need to be imported. Use 'import' to reference the package instead. https://nextjs.org/docs/messages/import-esm-externals`\n      )\n    }\n\n    if (isLocal) {\n      // Makes sure dist/shared and dist/server are not bundled\n      // we need to process shared/lib/router/router so that\n      // the DefinePlugin can inject process.env values\n      const isNextExternal = /next[/\\\\]dist[/\\\\](shared|server)[/\\\\](?!lib[/\\\\]router[/\\\\]router)/.test(\n        res\n      )\n\n      if (isNextExternal) {\n        // Generate Next.js external import\n        const externalRequest = path.posix.join(\n          'next',\n          'dist',\n          path\n            .relative(\n              // Root of Next.js package:\n              path.join(__dirname, '..'),\n              res\n            )\n            // Windows path normalization\n            .replace(/\\\\/g, '/')\n        )\n        return `commonjs ${externalRequest}`\n      } else {\n        return\n      }\n    }\n\n    // Bundled Node.js code is relocated without its node_modules tree.\n    // This means we need to make sure its request resolves to the same\n    // package that'll be available at runtime. If it's not identical,\n    // we need to bundle the code (even if it _should_ be external).\n    let baseRes: string | null\n    let baseIsEsm: boolean\n    try {\n      const baseResolve = getResolve(\n        isEsm ? NODE_ESM_RESOLVE_OPTIONS : NODE_RESOLVE_OPTIONS\n      )\n      ;[baseRes, baseIsEsm] = await baseResolve(dir, request)\n    } catch (err) {\n      baseRes = null\n      baseIsEsm = false\n    }\n\n    // Same as above: if the package, when required from the root,\n    // would be different from what the real resolution would use, we\n    // cannot externalize it.\n    // if request is pointing to a symlink it could point to the the same file,\n    // the resolver will resolve symlinks so this is handled\n    if (baseRes !== res || isEsm !== baseIsEsm) {\n      return\n    }\n\n    const externalType = isEsm ? 'module' : 'commonjs'\n\n    if (\n      res.match(/next[/\\\\]dist[/\\\\]shared[/\\\\](?!lib[/\\\\]router[/\\\\]router)/)\n    ) {\n      return `${externalType} ${request}`\n    }\n\n    // Default pages have to be transpiled\n    if (\n      res.match(/[/\\\\]next[/\\\\]dist[/\\\\]/) ||\n      // This is the @babel/plugin-transform-runtime \"helpers: true\" option\n      res.match(/node_modules[/\\\\]@babel[/\\\\]runtime[/\\\\]/)\n    ) {\n      return\n    }\n\n    // Webpack itself has to be compiled because it doesn't always use module relative paths\n    if (\n      res.match(/node_modules[/\\\\]webpack/) ||\n      res.match(/node_modules[/\\\\]css-loader/)\n    ) {\n      return\n    }\n\n    // Anything else that is standard JavaScript within `node_modules`\n    // can be externalized.\n    if (/node_modules[/\\\\].*\\.c?js$/.test(res)) {\n      return `${externalType} ${request}`\n    }\n\n    // Default behavior: bundle the code!\n  }\n\n  const emacsLockfilePattern = '**/.#*'\n\n  let webpackConfig: webpack.Configuration = {\n    externals: !isServer\n      ? // make sure importing \"next\" is handled gracefully for client\n        // bundles in case a user imported types and it wasn't removed\n        // TODO: should we warn/error for this instead?\n        ['next']\n      : !isServerless\n      ? [\n          isWebpack5\n            ? ({\n                context,\n                request,\n                dependencyType,\n                getResolve,\n              }: {\n                context: string\n                request: string\n                dependencyType: string\n                getResolve: (\n                  options: any\n                ) => (\n                  resolveContext: string,\n                  resolveRequest: string,\n                  callback: (\n                    err?: Error,\n                    result?: string,\n                    resolveData?: { descriptionFileData?: { type?: any } }\n                  ) => void\n                ) => void\n              }) =>\n                handleExternals(context, request, dependencyType, (options) => {\n                  const resolveFunction = getResolve(options)\n                  return (resolveContext: string, requestToResolve: string) =>\n                    new Promise((resolve, reject) => {\n                      resolveFunction(\n                        resolveContext,\n                        requestToResolve,\n                        (err, result, resolveData) => {\n                          if (err) return reject(err)\n                          if (!result) return resolve([null, false])\n                          const isEsm = /\\.js$/i.test(result)\n                            ? resolveData?.descriptionFileData?.type ===\n                              'module'\n                            : /\\.mjs$/i.test(result)\n                          resolve([result, isEsm])\n                        }\n                      )\n                    })\n                })\n            : (\n                context: string,\n                request: string,\n                callback: (err?: Error, result?: string | undefined) => void\n              ) =>\n                handleExternals(\n                  context,\n                  request,\n                  'commonjs',\n                  () => (resolveContext: string, requestToResolve: string) =>\n                    new Promise((resolve) =>\n                      resolve([\n                        require.resolve(requestToResolve, {\n                          paths: [resolveContext],\n                        }),\n                        false,\n                      ])\n                    )\n                ).then((result) => callback(undefined, result), callback),\n        ]\n      : [\n          // When the 'serverless' target is used all node_modules will be compiled into the output bundles\n          // So that the 'serverless' bundles have 0 runtime dependencies\n          'next/dist/compiled/@ampproject/toolbox-optimizer', // except this one\n\n          // Mark this as external if not enabled so it doesn't cause a\n          // webpack error from being missing\n          ...(config.experimental.optimizeCss ? [] : ['critters']),\n        ],\n    optimization: {\n      // Webpack 5 uses a new property for the same functionality\n      ...(isWebpack5 ? { emitOnErrors: !dev } : { noEmitOnErrors: dev }),\n      checkWasmTypes: false,\n      nodeEnv: false,\n      splitChunks: isServer\n        ? isWebpack5 && !dev\n          ? ({\n              filename: '[name].js',\n              // allow to split entrypoints\n              chunks: 'all',\n              // size of files is not so relevant for server build\n              // we want to prefer deduplication to load less code\n              minSize: 1000,\n            } as any)\n          : false\n        : splitChunksConfig,\n      runtimeChunk: isServer\n        ? isWebpack5 && !isLikeServerless\n          ? { name: 'webpack-runtime' }\n          : undefined\n        : { name: CLIENT_STATIC_FILES_RUNTIME_WEBPACK },\n      minimize: !(dev || isServer),\n      minimizer: [\n        // Minify JavaScript\n        (compiler: webpack.Compiler) => {\n          // @ts-ignore No typings yet\n          const {\n            TerserPlugin,\n          } = require('./webpack/plugins/terser-webpack-plugin/src/index.js')\n          new TerserPlugin({\n            cacheDir: path.join(distDir, 'cache', 'next-minifier'),\n            parallel: config.experimental.cpus,\n            terserOptions,\n          }).apply(compiler)\n        },\n        // Minify CSS\n        (compiler: webpack.Compiler) => {\n          const {\n            CssMinimizerPlugin,\n          } = require('./webpack/plugins/css-minimizer-plugin')\n          new CssMinimizerPlugin({\n            postcssOptions: {\n              map: {\n                // `inline: false` generates the source map in a separate file.\n                // Otherwise, the CSS file is needlessly large.\n                inline: false,\n                // `annotation: false` skips appending the `sourceMappingURL`\n                // to the end of the CSS file. Webpack already handles this.\n                annotation: false,\n              },\n            },\n          }).apply(compiler)\n        },\n      ],\n    },\n    context: dir,\n    node: {\n      setImmediate: false,\n    },\n    // Kept as function to be backwards compatible\n    // @ts-ignore TODO webpack 5 typings needed\n    entry: async () => {\n      return {\n        ...(clientEntries ? clientEntries : {}),\n        ...entrypoints,\n      }\n    },\n    watchOptions: {\n      aggregateTimeout: 5,\n      ignored: [\n        '**/.git/**',\n        '**/node_modules/**',\n        '**/.next/**',\n        // can be removed after https://github.com/paulmillr/chokidar/issues/955 is released\n        emacsLockfilePattern,\n      ],\n    },\n    output: {\n      // we must set publicPath to an empty value to override the default of\n      // auto which doesn't work in IE11\n      publicPath: `${config.assetPrefix || ''}/_next/`,\n      path:\n        isServer && isWebpack5 && !dev\n          ? path.join(outputPath, 'chunks')\n          : outputPath,\n      // On the server we don't use hashes\n      filename: isServer\n        ? isWebpack5 && !dev\n          ? '../[name].js'\n          : '[name].js'\n        : `static/chunks/${isDevFallback ? 'fallback/' : ''}[name]${\n            dev ? '' : isWebpack5 ? '-[contenthash]' : '-[chunkhash]'\n          }.js`,\n      library: isServer ? undefined : '_N_E',\n      libraryTarget: isServer ? 'commonjs2' : 'assign',\n      hotUpdateChunkFilename: isWebpack5\n        ? 'static/webpack/[id].[fullhash].hot-update.js'\n        : 'static/webpack/[id].[hash].hot-update.js',\n      hotUpdateMainFilename: isWebpack5\n        ? 'static/webpack/[fullhash].[runtime].hot-update.json'\n        : 'static/webpack/[hash].hot-update.json',\n      // This saves chunks with the name given via `import()`\n      chunkFilename: isServer\n        ? '[name].js'\n        : `static/chunks/${isDevFallback ? 'fallback/' : ''}${\n            dev ? '[name]' : '[name].[contenthash]'\n          }.js`,\n      strictModuleExceptionHandling: true,\n      crossOriginLoading: crossOrigin,\n      futureEmitAssets: !dev,\n      webassemblyModuleFilename: 'static/wasm/[modulehash].wasm',\n    },\n    performance: false,\n    resolve: resolveConfig,\n    resolveLoader: {\n      // The loaders Next.js provides\n      alias: [\n        'emit-file-loader',\n        'error-loader',\n        'next-babel-loader',\n        'next-client-pages-loader',\n        'next-image-loader',\n        'next-serverless-loader',\n        'noop-loader',\n        'next-style-loader',\n      ].reduce((alias, loader) => {\n        // using multiple aliases to replace `resolveLoader.modules`\n        alias[loader] = path.join(__dirname, 'webpack', 'loaders', loader)\n\n        return alias\n      }, {} as Record<string, string>),\n      modules: [\n        'node_modules',\n        ...nodePathList, // Support for NODE_PATH environment variable\n      ],\n      plugins: isWebpack5 ? [] : [require('pnp-webpack-plugin')],\n    },\n    module: {\n      rules: [\n        ...(isWebpack5\n          ? [\n              // TODO: FIXME: do NOT webpack 5 support with this\n              // x-ref: https://github.com/webpack/webpack/issues/11467\n              {\n                test: /\\.m?js/,\n                resolve: {\n                  fullySpecified: false,\n                },\n              } as any,\n            ]\n          : []),\n        {\n          test: /\\.(tsx|ts|js|mjs|jsx)$/,\n          ...(config.experimental.externalDir\n            ? // Allowing importing TS/TSX files from outside of the root dir.\n              {}\n            : { include: [dir, ...babelIncludeRegexes] }),\n          exclude: (excludePath: string) => {\n            if (babelIncludeRegexes.some((r) => r.test(excludePath))) {\n              return false\n            }\n            return /node_modules/.test(excludePath)\n          },\n          use: hasReactRefresh\n            ? [\n                require.resolve('@next/react-refresh-utils/loader'),\n                defaultLoaders.babel,\n              ]\n            : defaultLoaders.babel,\n        },\n        ...(!config.images.disableStaticImages && isWebpack5\n          ? [\n              {\n                test: /\\.(png|jpg|jpeg|gif|webp|ico|bmp|svg)$/i,\n                loader: 'next-image-loader',\n                issuer: { not: regexLikeCss },\n                dependency: { not: ['url'] },\n                options: {\n                  isServer,\n                  isDev: dev,\n                  assetPrefix: config.assetPrefix,\n                },\n              },\n            ]\n          : []),\n      ].filter(Boolean),\n    },\n    plugins: [\n      hasReactRefresh && new ReactRefreshWebpackPlugin(webpack),\n      // Makes sure `Buffer` and `process` are polyfilled in client-side bundles (same behavior as webpack 4)\n      isWebpack5 &&\n        !isServer &&\n        new webpack.ProvidePlugin({\n          Buffer: [require.resolve('buffer'), 'Buffer'],\n          process: [require.resolve('process')],\n        }),\n      // This plugin makes sure `output.filename` is used for entry chunks\n      !isWebpack5 && new ChunkNamesPlugin(),\n      new webpack.DefinePlugin({\n        ...Object.keys(process.env).reduce(\n          (prev: { [key: string]: string }, key: string) => {\n            if (key.startsWith('NEXT_PUBLIC_')) {\n              prev[`process.env.${key}`] = JSON.stringify(process.env[key]!)\n            }\n            return prev\n          },\n          {}\n        ),\n        ...Object.keys(config.env).reduce((acc, key) => {\n          if (/^(?:NODE_.+)|^(?:__.+)$/i.test(key)) {\n            throw new Error(\n              `The key \"${key}\" under \"env\" in next.config.js is not allowed. https://nextjs.org/docs/messages/env-key-not-allowed`\n            )\n          }\n\n          return {\n            ...acc,\n            [`process.env.${key}`]: JSON.stringify(config.env[key]),\n          }\n        }, {}),\n        // TODO: enforce `NODE_ENV` on `process.env`, and add a test:\n        'process.env.NODE_ENV': JSON.stringify(\n          dev ? 'development' : 'production'\n        ),\n        'process.env.__NEXT_CROSS_ORIGIN': JSON.stringify(crossOrigin),\n        'process.browser': JSON.stringify(!isServer),\n        'process.env.__NEXT_TEST_MODE': JSON.stringify(\n          process.env.__NEXT_TEST_MODE\n        ),\n        // This is used in client/dev-error-overlay/hot-dev-client.js to replace the dist directory\n        ...(dev && !isServer\n          ? {\n              'process.env.__NEXT_DIST_DIR': JSON.stringify(distDir),\n            }\n          : {}),\n        'process.env.__NEXT_TRAILING_SLASH': JSON.stringify(\n          config.trailingSlash\n        ),\n        'process.env.__NEXT_BUILD_INDICATOR': JSON.stringify(\n          config.devIndicators.buildActivity\n        ),\n        'process.env.__NEXT_PLUGINS': JSON.stringify(\n          config.experimental.plugins\n        ),\n        'process.env.__NEXT_STRICT_MODE': JSON.stringify(\n          config.reactStrictMode\n        ),\n        'process.env.__NEXT_REACT_ROOT': JSON.stringify(hasReactRoot),\n        'process.env.__NEXT_OPTIMIZE_FONTS': JSON.stringify(\n          config.optimizeFonts && !dev\n        ),\n        'process.env.__NEXT_OPTIMIZE_IMAGES': JSON.stringify(\n          config.experimental.optimizeImages\n        ),\n        'process.env.__NEXT_OPTIMIZE_CSS': JSON.stringify(\n          config.experimental.optimizeCss && !dev\n        ),\n        'process.env.__NEXT_SCROLL_RESTORATION': JSON.stringify(\n          config.experimental.scrollRestoration\n        ),\n        'process.env.__NEXT_IMAGE_OPTS': JSON.stringify({\n          deviceSizes: config.images.deviceSizes,\n          imageSizes: config.images.imageSizes,\n          path: config.images.path,\n          loader: config.images.loader,\n          ...(dev\n            ? {\n                // pass domains in development to allow validating on the client\n                domains: config.images.domains,\n              }\n            : {}),\n        }),\n        'process.env.__NEXT_ROUTER_BASEPATH': JSON.stringify(config.basePath),\n        'process.env.__NEXT_HAS_REWRITES': JSON.stringify(hasRewrites),\n        'process.env.__NEXT_I18N_SUPPORT': JSON.stringify(!!config.i18n),\n        'process.env.__NEXT_I18N_DOMAINS': JSON.stringify(config.i18n?.domains),\n        'process.env.__NEXT_ANALYTICS_ID': JSON.stringify(config.analyticsId),\n        ...(isServer\n          ? {\n              // Fix bad-actors in the npm ecosystem (e.g. `node-formidable`)\n              // This is typically found in unmaintained modules from the\n              // pre-webpack era (common in server-side code)\n              'global.GENTLY': JSON.stringify(false),\n            }\n          : undefined),\n        // stub process.env with proxy to warn a missing value is\n        // being accessed in development mode\n        ...(config.experimental.pageEnv && dev\n          ? {\n              'process.env': `\n            new Proxy(${isServer ? 'process.env' : '{}'}, {\n              get(target, prop) {\n                if (typeof target[prop] === 'undefined') {\n                  console.warn(\\`An environment variable (\\${prop}) that was not provided in the environment was accessed.\\nSee more info here: https://nextjs.org/docs/messages/missing-env-value\\`)\n                }\n                return target[prop]\n              }\n            })\n          `,\n            }\n          : {}),\n      }),\n      !isServer &&\n        new ReactLoadablePlugin({\n          filename: REACT_LOADABLE_MANIFEST,\n          pagesDir,\n        }),\n      !isServer && new DropClientPage(),\n      // Moment.js is an extremely popular library that bundles large locale files\n      // by default due to how Webpack interprets its code. This is a practical\n      // solution that requires the user to opt into importing specific locales.\n      // https://github.com/jmblog/how-to-optimize-momentjs-with-webpack\n      config.excludeDefaultMomentLocales &&\n        new webpack.IgnorePlugin({\n          resourceRegExp: /^\\.\\/locale$/,\n          contextRegExp: /moment$/,\n        }),\n      ...(dev\n        ? (() => {\n            // Even though require.cache is server only we have to clear assets from both compilations\n            // This is because the client compilation generates the build manifest that's used on the server side\n            const {\n              NextJsRequireCacheHotReloader,\n            } = require('./webpack/plugins/nextjs-require-cache-hot-reloader')\n            const devPlugins = [new NextJsRequireCacheHotReloader()]\n\n            if (!isServer) {\n              devPlugins.push(new webpack.HotModuleReplacementPlugin())\n            }\n\n            return devPlugins\n          })()\n        : []),\n      // Webpack 5 no longer requires this plugin in production:\n      !isWebpack5 && !dev && new webpack.HashedModuleIdsPlugin(),\n      !dev &&\n        new webpack.IgnorePlugin({\n          resourceRegExp: /react-is/,\n          contextRegExp: /next[\\\\/]dist[\\\\/]/,\n        }),\n      isServerless && isServer && new ServerlessPlugin(),\n      isServer &&\n        new PagesManifestPlugin({ serverless: isLikeServerless, dev }),\n      !isWebpack5 &&\n        target === 'server' &&\n        isServer &&\n        new NextJsSSRModuleCachePlugin({ outputPath }),\n      isServer && new NextJsSsrImportPlugin(),\n      !isServer &&\n        new BuildManifestPlugin({\n          buildId,\n          rewrites,\n          isDevFallback,\n        }),\n      !dev &&\n        !isServer &&\n        config.experimental.stats &&\n        new BuildStatsPlugin({\n          distDir,\n        }),\n      new ProfilingPlugin(),\n      config.optimizeFonts &&\n        !dev &&\n        isServer &&\n        (function () {\n          const {\n            FontStylesheetGatheringPlugin,\n          } = require('./webpack/plugins/font-stylesheet-gathering-plugin') as {\n            FontStylesheetGatheringPlugin: typeof import('./webpack/plugins/font-stylesheet-gathering-plugin').FontStylesheetGatheringPlugin\n          }\n          return new FontStylesheetGatheringPlugin({\n            isLikeServerless,\n          })\n        })(),\n      config.experimental.conformance &&\n        !isWebpack5 &&\n        !dev &&\n        new WebpackConformancePlugin({\n          tests: [\n            !isServer &&\n              conformanceConfig.MinificationConformanceCheck.enabled &&\n              new MinificationConformanceCheck(),\n            conformanceConfig.ReactSyncScriptsConformanceCheck.enabled &&\n              new ReactSyncScriptsConformanceCheck({\n                AllowedSources:\n                  conformanceConfig.ReactSyncScriptsConformanceCheck\n                    .allowedSources || [],\n              }),\n            !isServer &&\n              conformanceConfig.DuplicatePolyfillsConformanceCheck.enabled &&\n              new DuplicatePolyfillsConformanceCheck({\n                BlockedAPIToBePolyfilled:\n                  conformanceConfig.DuplicatePolyfillsConformanceCheck\n                    .BlockedAPIToBePolyfilled,\n              }),\n            !isServer &&\n              conformanceConfig.GranularChunksConformanceCheck.enabled &&\n              new GranularChunksConformanceCheck(\n                splitChunksConfigs.prodGranular\n              ),\n          ].filter(Boolean),\n        }),\n      new WellKnownErrorsPlugin(),\n    ].filter((Boolean as any) as ExcludesFalse),\n  }\n\n  // Support tsconfig and jsconfig baseUrl\n  if (resolvedBaseUrl) {\n    webpackConfig.resolve?.modules?.push(resolvedBaseUrl)\n  }\n\n  if (jsConfig?.compilerOptions?.paths && resolvedBaseUrl) {\n    webpackConfig.resolve?.plugins?.unshift(\n      new JsConfigPathsPlugin(jsConfig.compilerOptions.paths, resolvedBaseUrl)\n    )\n  }\n\n  if (isWebpack5) {\n    // futureEmitAssets is on by default in webpack 5\n    delete webpackConfig.output?.futureEmitAssets\n\n    if (isServer && dev) {\n      // Enable building of client compilation before server compilation in development\n      // @ts-ignore dependencies exists\n      webpackConfig.dependencies = ['client']\n    }\n    // webpack 5 no longer polyfills Node.js modules:\n    if (webpackConfig.node) delete webpackConfig.node.setImmediate\n\n    // Due to bundling of webpack the default values can't be correctly detected\n    // This restores the webpack defaults\n    // @ts-ignore webpack 5\n    webpackConfig.snapshot = {}\n    if (process.versions.pnp === '3') {\n      const match = /^(.+?)[\\\\/]cache[\\\\/]jest-worker-npm-[^\\\\/]+\\.zip[\\\\/]node_modules[\\\\/]/.exec(\n        require.resolve('jest-worker')\n      )\n      if (match) {\n        // @ts-ignore webpack 5\n        webpackConfig.snapshot.managedPaths = [\n          path.resolve(match[1], 'unplugged'),\n        ]\n      }\n    } else {\n      const match = /^(.+?[\\\\/]node_modules)[\\\\/]/.exec(\n        require.resolve('jest-worker')\n      )\n      if (match) {\n        // @ts-ignore webpack 5\n        webpackConfig.snapshot.managedPaths = [match[1]]\n      }\n    }\n    if (process.versions.pnp === '1') {\n      const match = /^(.+?[\\\\/]v4)[\\\\/]npm-jest-worker-[^\\\\/]+-[\\da-f]{40}[\\\\/]node_modules[\\\\/]/.exec(\n        require.resolve('jest-worker')\n      )\n      if (match) {\n        // @ts-ignore webpack 5\n        webpackConfig.snapshot.immutablePaths = [match[1]]\n      }\n    } else if (process.versions.pnp === '3') {\n      const match = /^(.+?)[\\\\/]jest-worker-npm-[^\\\\/]+\\.zip[\\\\/]node_modules[\\\\/]/.exec(\n        require.resolve('jest-worker')\n      )\n      if (match) {\n        // @ts-ignore webpack 5\n        webpackConfig.snapshot.immutablePaths = [match[1]]\n      }\n    }\n\n    if (dev) {\n      if (!webpackConfig.optimization) {\n        webpackConfig.optimization = {}\n      }\n      webpackConfig.optimization.providedExports = false\n      webpackConfig.optimization.usedExports = false\n    }\n\n    const configVars = JSON.stringify({\n      crossOrigin: config.crossOrigin,\n      pageExtensions: config.pageExtensions,\n      trailingSlash: config.trailingSlash,\n      buildActivity: config.devIndicators.buildActivity,\n      plugins: config.experimental.plugins,\n      reactStrictMode: config.reactStrictMode,\n      reactMode: config.experimental.reactMode,\n      optimizeFonts: config.optimizeFonts,\n      optimizeImages: config.experimental.optimizeImages,\n      optimizeCss: config.experimental.optimizeCss,\n      scrollRestoration: config.experimental.scrollRestoration,\n      basePath: config.basePath,\n      pageEnv: config.experimental.pageEnv,\n      excludeDefaultMomentLocales: config.excludeDefaultMomentLocales,\n      assetPrefix: config.assetPrefix,\n      disableOptimizedLoading: config.experimental.disableOptimizedLoading,\n      target,\n      reactProductionProfiling,\n      webpack: !!config.webpack,\n      hasRewrites,\n    })\n\n    const cache: any = {\n      type: 'filesystem',\n      // Includes:\n      //  - Next.js version\n      //  - next.config.js keys that affect compilation\n      version: `${process.env.__NEXT_VERSION}|${configVars}`,\n      cacheDirectory: path.join(distDir, 'cache', 'webpack'),\n    }\n\n    // Adds `next.config.js` as a buildDependency when custom webpack config is provided\n    if (config.webpack && config.configFile) {\n      cache.buildDependencies = {\n        config: [config.configFile],\n      }\n    }\n\n    webpackConfig.cache = cache\n\n    if (process.env.NEXT_WEBPACK_LOGGING) {\n      const logInfra = process.env.NEXT_WEBPACK_LOGGING.includes(\n        'infrastructure'\n      )\n      const logProfileClient = process.env.NEXT_WEBPACK_LOGGING.includes(\n        'profile-client'\n      )\n      const logProfileServer = process.env.NEXT_WEBPACK_LOGGING.includes(\n        'profile-server'\n      )\n      const logDefault = !logInfra && !logProfileClient && !logProfileServer\n\n      if (logDefault || logInfra) {\n        // @ts-ignore TODO: remove ignore when webpack 5 is stable\n        webpackConfig.infrastructureLogging = {\n          level: 'verbose',\n          debug: /FileSystemInfo/,\n        }\n      }\n\n      if (\n        logDefault ||\n        (logProfileClient && !isServer) ||\n        (logProfileServer && isServer)\n      ) {\n        webpackConfig.plugins!.push((compiler: webpack.Compiler) => {\n          compiler.hooks.done.tap('next-webpack-logging', (stats) => {\n            console.log(\n              stats.toString({\n                colors: true,\n                // @ts-ignore TODO: remove ignore when webpack 5 is stable\n                logging: logDefault ? 'log' : 'verbose',\n              })\n            )\n          })\n        })\n      }\n\n      if ((logProfileClient && !isServer) || (logProfileServer && isServer)) {\n        webpackConfig.plugins!.push(\n          new webpack.ProgressPlugin({\n            // @ts-ignore TODO: remove ignore when webpack 5 is stable\n            profile: true,\n          })\n        )\n        webpackConfig.profile = true\n      }\n    }\n  }\n\n  webpackConfig = await buildConfiguration(webpackConfig, {\n    rootDirectory: dir,\n    customAppFile,\n    isDevelopment: dev,\n    isServer,\n    assetPrefix: config.assetPrefix || '',\n    sassOptions: config.sassOptions,\n    productionBrowserSourceMaps: config.productionBrowserSourceMaps,\n    future: config.future,\n    isCraCompat: config.experimental.craCompat,\n  })\n\n  let originalDevtool = webpackConfig.devtool\n  if (typeof config.webpack === 'function') {\n    webpackConfig = config.webpack(webpackConfig, {\n      dir,\n      dev,\n      isServer,\n      buildId,\n      config,\n      defaultLoaders,\n      totalPages,\n      webpack,\n    })\n\n    if (!webpackConfig) {\n      throw new Error(\n        'Webpack config is undefined. You may have forgot to return properly from within the \"webpack\" method of your next.config.js.\\n' +\n          'See more info here https://nextjs.org/docs/messages/undefined-webpack-config'\n      )\n    }\n\n    if (dev && originalDevtool !== webpackConfig.devtool) {\n      webpackConfig.devtool = originalDevtool\n      devtoolRevertWarning(originalDevtool)\n    }\n\n    if (typeof (webpackConfig as any).then === 'function') {\n      console.warn(\n        '> Promise returned in next config. https://nextjs.org/docs/messages/promise-in-next-config'\n      )\n    }\n  }\n\n  if (!config.images.disableStaticImages && isWebpack5) {\n    const rules = webpackConfig.module?.rules || []\n    const hasCustomSvg = rules.some(\n      (rule) =>\n        rule.loader !== 'next-image-loader' &&\n        'test' in rule &&\n        rule.test instanceof RegExp &&\n        rule.test.test('.svg')\n    )\n    const nextImageRule = rules.find(\n      (rule) => rule.loader === 'next-image-loader'\n    )\n    if (hasCustomSvg && nextImageRule) {\n      // Exclude svg if the user already defined it in custom\n      // webpack config such as `@svgr/webpack` plugin or\n      // the `babel-plugin-inline-react-svg` plugin.\n      nextImageRule.test = /\\.(png|jpg|jpeg|gif|webp|ico|bmp)$/i\n    }\n  }\n\n  if (\n    config.experimental.craCompat &&\n    webpackConfig.module?.rules &&\n    webpackConfig.plugins\n  ) {\n    // CRA prevents loading all locales by default\n    // https://github.com/facebook/create-react-app/blob/fddce8a9e21bf68f37054586deb0c8636a45f50b/packages/react-scripts/config/webpack.config.js#L721\n    webpackConfig.plugins.push(\n      new webpack.IgnorePlugin(/^\\.\\/locale$/, /moment$/)\n    )\n\n    // CRA allows importing non-webpack handled files with file-loader\n    // these need to be the last rule to prevent catching other items\n    // https://github.com/facebook/create-react-app/blob/fddce8a9e21bf68f37054586deb0c8636a45f50b/packages/react-scripts/config/webpack.config.js#L594\n    const fileLoaderExclude = [/\\.(js|mjs|jsx|ts|tsx|json)$/]\n    const fileLoader = isWebpack5\n      ? {\n          exclude: fileLoaderExclude,\n          issuer: fileLoaderExclude,\n          type: 'asset/resource',\n          generator: {\n            publicPath: '/_next/',\n            filename: 'static/media/[name].[hash:8].[ext]',\n          },\n        }\n      : {\n          loader: require.resolve('next/dist/compiled/file-loader'),\n          // Exclude `js` files to keep \"css\" loader working as it injects\n          // its runtime that would otherwise be processed through \"file\" loader.\n          // Also exclude `html` and `json` extensions so they get processed\n          // by webpacks internal loaders.\n          exclude: fileLoaderExclude,\n          issuer: fileLoaderExclude,\n          options: {\n            publicPath: '/_next/static/media',\n            outputPath: 'static/media',\n            name: '[name].[hash:8].[ext]',\n          },\n        }\n\n    const topRules = []\n    const innerRules = []\n\n    for (const rule of webpackConfig.module.rules) {\n      if (rule.resolve) {\n        topRules.push(rule)\n      } else {\n        if (\n          rule.oneOf &&\n          !(rule.test || rule.exclude || rule.resource || rule.issuer)\n        ) {\n          rule.oneOf.forEach((r) => innerRules.push(r))\n        } else {\n          innerRules.push(rule)\n        }\n      }\n    }\n\n    webpackConfig.module.rules = [\n      ...(topRules as any),\n      {\n        oneOf: [...innerRules, fileLoader],\n      },\n    ]\n  }\n\n  // Backwards compat with webpack-dev-middleware options object\n  if (typeof config.webpackDevMiddleware === 'function') {\n    const options = config.webpackDevMiddleware({\n      watchOptions: webpackConfig.watchOptions,\n    })\n    if (options.watchOptions) {\n      webpackConfig.watchOptions = options.watchOptions\n    }\n  }\n\n  function canMatchCss(rule: webpack.RuleSetCondition | undefined): boolean {\n    if (!rule) {\n      return false\n    }\n\n    const fileNames = [\n      '/tmp/test.css',\n      '/tmp/test.scss',\n      '/tmp/test.sass',\n      '/tmp/test.less',\n      '/tmp/test.styl',\n    ]\n\n    if (rule instanceof RegExp && fileNames.some((input) => rule.test(input))) {\n      return true\n    }\n\n    if (typeof rule === 'function') {\n      if (\n        fileNames.some((input) => {\n          try {\n            if (rule(input)) {\n              return true\n            }\n          } catch (_) {}\n          return false\n        })\n      ) {\n        return true\n      }\n    }\n\n    if (Array.isArray(rule) && rule.some(canMatchCss)) {\n      return true\n    }\n\n    return false\n  }\n\n  const hasUserCssConfig =\n    webpackConfig.module?.rules.some(\n      (rule) => canMatchCss(rule.test) || canMatchCss(rule.include)\n    ) ?? false\n\n  if (hasUserCssConfig) {\n    // only show warning for one build\n    if (isServer) {\n      console.warn(\n        chalk.yellow.bold('Warning: ') +\n          chalk.bold(\n            'Built-in CSS support is being disabled due to custom CSS configuration being detected.\\n'\n          ) +\n          'See here for more info: https://nextjs.org/docs/messages/built-in-css-disabled\\n'\n      )\n    }\n\n    if (webpackConfig.module?.rules.length) {\n      // Remove default CSS Loader\n      webpackConfig.module.rules = webpackConfig.module.rules.filter(\n        (r) =>\n          !(\n            typeof r.oneOf?.[0]?.options === 'object' &&\n            r.oneOf[0].options.__next_css_remove === true\n          )\n      )\n    }\n    if (webpackConfig.plugins?.length) {\n      // Disable CSS Extraction Plugin\n      webpackConfig.plugins = webpackConfig.plugins.filter(\n        (p) => (p as any).__next_css_remove !== true\n      )\n    }\n    if (webpackConfig.optimization?.minimizer?.length) {\n      // Disable CSS Minifier\n      webpackConfig.optimization.minimizer = webpackConfig.optimization.minimizer.filter(\n        (e) => (e as any).__next_css_remove !== true\n      )\n    }\n  } else if (!config.future.strictPostcssConfiguration) {\n    await __overrideCssConfiguration(dir, !dev, webpackConfig)\n  }\n\n  // Inject missing React Refresh loaders so that development mode is fast:\n  if (hasReactRefresh) {\n    attachReactRefresh(webpackConfig, defaultLoaders.babel)\n  }\n\n  // check if using @zeit/next-typescript and show warning\n  if (\n    isServer &&\n    webpackConfig.module &&\n    Array.isArray(webpackConfig.module.rules)\n  ) {\n    let foundTsRule = false\n\n    webpackConfig.module.rules = webpackConfig.module.rules.filter(\n      (rule): boolean => {\n        if (!(rule.test instanceof RegExp)) return true\n        if ('noop.ts'.match(rule.test) && !'noop.js'.match(rule.test)) {\n          // remove if it matches @zeit/next-typescript\n          foundTsRule = rule.use === defaultLoaders.babel\n          return !foundTsRule\n        }\n        return true\n      }\n    )\n\n    if (foundTsRule) {\n      console.warn(\n        '\\n@zeit/next-typescript is no longer needed since Next.js has built-in support for TypeScript now. Please remove it from your next.config.js and your .babelrc\\n'\n      )\n    }\n  }\n\n  // Patch `@zeit/next-sass`, `@zeit/next-less`, `@zeit/next-stylus` for compatibility\n  if (webpackConfig.module && Array.isArray(webpackConfig.module.rules)) {\n    ;[].forEach.call(webpackConfig.module.rules, function (\n      rule: webpack.RuleSetRule\n    ) {\n      if (!(rule.test instanceof RegExp && Array.isArray(rule.use))) {\n        return\n      }\n\n      const isSass =\n        rule.test.source === '\\\\.scss$' || rule.test.source === '\\\\.sass$'\n      const isLess = rule.test.source === '\\\\.less$'\n      const isCss = rule.test.source === '\\\\.css$'\n      const isStylus = rule.test.source === '\\\\.styl$'\n\n      // Check if the rule we're iterating over applies to Sass, Less, or CSS\n      if (!(isSass || isLess || isCss || isStylus)) {\n        return\n      }\n\n      ;[].forEach.call(rule.use, function (use: webpack.RuleSetUseItem) {\n        if (\n          !(\n            use &&\n            typeof use === 'object' &&\n            // Identify use statements only pertaining to `css-loader`\n            (use.loader === 'css-loader' ||\n              use.loader === 'css-loader/locals') &&\n            use.options &&\n            typeof use.options === 'object' &&\n            // The `minimize` property is a good heuristic that we need to\n            // perform this hack. The `minimize` property was only valid on\n            // old `css-loader` versions. Custom setups (that aren't next-sass,\n            // next-less or next-stylus) likely have the newer version.\n            // We still handle this gracefully below.\n            (Object.prototype.hasOwnProperty.call(use.options, 'minimize') ||\n              Object.prototype.hasOwnProperty.call(\n                use.options,\n                'exportOnlyLocals'\n              ))\n          )\n        ) {\n          return\n        }\n\n        // Try to monkey patch within a try-catch. We shouldn't fail the build\n        // if we cannot pull this off.\n        // The user may not even be using the `next-sass` or `next-less` or\n        // `next-stylus` plugins.\n        // If it does work, great!\n        try {\n          // Resolve the version of `@zeit/next-css` as depended on by the Sass,\n          // Less or Stylus plugin.\n          const correctNextCss = require.resolve('@zeit/next-css', {\n            paths: [\n              isCss\n                ? // Resolve `@zeit/next-css` from the base directory\n                  dir\n                : // Else, resolve it from the specific plugins\n                  require.resolve(\n                    isSass\n                      ? '@zeit/next-sass'\n                      : isLess\n                      ? '@zeit/next-less'\n                      : isStylus\n                      ? '@zeit/next-stylus'\n                      : 'next'\n                  ),\n            ],\n          })\n\n          // If we found `@zeit/next-css` ...\n          if (correctNextCss) {\n            // ... resolve the version of `css-loader` shipped with that\n            // package instead of whichever was hoisted highest in your\n            // `node_modules` tree.\n            const correctCssLoader = require.resolve(use.loader, {\n              paths: [correctNextCss],\n            })\n            if (correctCssLoader) {\n              // We saved the user from a failed build!\n              use.loader = correctCssLoader\n            }\n          }\n        } catch (_) {\n          // The error is not required to be handled.\n        }\n      })\n    })\n  }\n\n  // Backwards compat for `main.js` entry key\n  // and setup of dependencies between entries\n  // we can't do that in the initial entry for\n  // backward-compat reasons\n  const originalEntry: any = webpackConfig.entry\n  if (typeof originalEntry !== 'undefined') {\n    const updatedEntry = async () => {\n      const entry: WebpackEntrypoints =\n        typeof originalEntry === 'function'\n          ? await originalEntry()\n          : originalEntry\n      // Server compilation doesn't have main.js\n      if (\n        clientEntries &&\n        Array.isArray(entry['main.js']) &&\n        entry['main.js'].length > 0\n      ) {\n        const originalFile = clientEntries[\n          CLIENT_STATIC_FILES_RUNTIME_MAIN\n        ] as string\n        entry[CLIENT_STATIC_FILES_RUNTIME_MAIN] = [\n          ...entry['main.js'],\n          originalFile,\n        ]\n      }\n      delete entry['main.js']\n\n      if (isWebpack5 && !isServer) {\n        for (const name of Object.keys(entry)) {\n          if (\n            name === 'polyfills' ||\n            name === 'main' ||\n            name === 'amp' ||\n            name === 'react-refresh'\n          )\n            continue\n          const dependOn =\n            name.startsWith('pages/') && name !== 'pages/_app'\n              ? 'pages/_app'\n              : 'main'\n          const old = entry[name]\n          if (typeof old === 'object' && !Array.isArray(old)) {\n            entry[name] = {\n              dependOn,\n              ...old,\n            }\n          } else {\n            entry[name] = {\n              import: old,\n              dependOn,\n            }\n          }\n        }\n      }\n\n      return entry\n    }\n    // @ts-ignore webpack 5 typings needed\n    webpackConfig.entry = updatedEntry\n  }\n\n  if (!dev) {\n    // entry is always a function\n    webpackConfig.entry = await (webpackConfig.entry as webpack.EntryFunc)()\n  }\n\n  return webpackConfig\n}\n"]}