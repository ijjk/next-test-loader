{"version":3,"sources":["../../../../next-server/lib/i18n/detect-domain-locale.ts"],"names":["detectDomainLocale","domainItems","req","detectedLocale","domainItem","host","headers","hostname","split","toLowerCase","item","domainHostname","domain","defaultLocale"],"mappings":"mFAEO,QAASA,CAAAA,kBAAT,CACLC,WADK,CAQLC,GARK,CASLC,cATK,CAUL,CACA,GAAIC,CAAAA,UAAJ,CAQA,GAAIH,WAAJ,CAAiB,CACf,KAAM,CAAEI,IAAF,EAAW,CAAAH,GAAG,MAAH,QAAAA,GAAG,CAAEI,OAAL,GAAgB,EAAjC,CACA;AACA,KAAMC,CAAAA,QAAQ,CAAGF,IAAH,cAAGA,IAAI,CAAEG,KAAN,CAAY,GAAZ,EAAiB,CAAjB,EAAoBC,WAApB,EAAjB,CAEA,IAAK,KAAMC,CAAAA,IAAX,GAAmBT,CAAAA,WAAnB,CAAgC,kBAC9B;AACA,KAAMU,CAAAA,cAAc,eAAGD,IAAI,CAACE,MAAR,eAAG,aAAaJ,KAAb,CAAmB,GAAnB,EAAwB,CAAxB,EAA2BC,WAA3B,EAAvB,CACA,GACEF,QAAQ,GAAKI,cAAb,EACA,CAAAR,cAAc,MAAd,QAAAA,cAAc,CAAEM,WAAhB,MAAkCC,IAAI,CAACG,aAAL,CAAmBJ,WAAnB,EAFpC,CAGE,CACAL,UAAU,CAAGM,IAAb,CACA,MACD,CACF,CACF,CAED,MAAON,CAAAA,UAAP,CACD","sourcesContent":["import { IncomingMessage } from 'http'\n\nexport function detectDomainLocale(\n  domainItems:\n    | Array<{\n        http?: boolean\n        domain: string\n        defaultLocale: string\n      }>\n    | undefined,\n  req?: IncomingMessage,\n  detectedLocale?: string\n) {\n  let domainItem:\n    | {\n        http?: boolean\n        domain: string\n        defaultLocale: string\n      }\n    | undefined\n\n  if (domainItems) {\n    const { host } = req?.headers || {}\n    // remove port from host and remove port if present\n    const hostname = host?.split(':')[0].toLowerCase()\n\n    for (const item of domainItems) {\n      // remove port if present\n      const domainHostname = item.domain?.split(':')[0].toLowerCase()\n      if (\n        hostname === domainHostname ||\n        detectedLocale?.toLowerCase() === item.defaultLocale.toLowerCase()\n      ) {\n        domainItem = item\n        break\n      }\n    }\n  }\n\n  return domainItem\n}\n"]}