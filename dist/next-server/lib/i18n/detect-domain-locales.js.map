{"version":3,"sources":["../../../../next-server/lib/i18n/detect-domain-locales.ts"],"names":["detectDomainLocales","req","domainItems","locales","defaultLocale","curDefaultLocale","curLocales","host","headers","hostname","split","toLowerCase","item","domain"],"mappings":"qFAEO,QAASA,CAAAA,mBAAT,CACLC,GADK,CAELC,WAFK,CASLC,OATK,CAULC,aAVK,CAWL,CACA,GAAIC,CAAAA,gBAAgB,CAAGD,aAAvB,CACA,GAAIE,CAAAA,UAAU,CAAGH,OAAjB,CAEA,KAAM,CAAEI,IAAF,EAAWN,GAAG,CAACO,OAArB,CAEA,GAAID,IAAI,EAAIL,WAAZ,CAAyB,CACvB;AACA,KAAMO,CAAAA,QAAQ,CAAGF,IAAI,CAACG,KAAL,CAAW,GAAX,EAAgB,CAAhB,EAAmBC,WAAnB,EAAjB,CAEA,IAAK,KAAMC,CAAAA,IAAX,GAAmBV,CAAAA,WAAnB,CAAgC,CAC9B,GAAIO,QAAQ,GAAKG,IAAI,CAACC,MAAL,CAAYF,WAAZ,EAAjB,CAA4C,CAC1CN,gBAAgB,CAAGO,IAAI,CAACR,aAAxB,CACAE,UAAU,CAAGM,IAAI,CAACT,OAAlB,CACA,MACD,CACF,CACF,CAED,MAAO,CACLC,aAAa,CAAEC,gBADV,CAELF,OAAO,CAAEG,UAFJ,CAAP,CAID","sourcesContent":["import { IncomingMessage } from 'http'\n\nexport function detectDomainLocales(\n  req: IncomingMessage,\n  domainItems:\n    | Array<{\n        domain: string\n        locales: string[]\n        defaultLocale: string\n      }>\n    | undefined,\n  locales: string[],\n  defaultLocale: string\n) {\n  let curDefaultLocale = defaultLocale\n  let curLocales = locales\n\n  const { host } = req.headers\n\n  if (host && domainItems) {\n    // remove port from host and remove port if present\n    const hostname = host.split(':')[0].toLowerCase()\n\n    for (const item of domainItems) {\n      if (hostname === item.domain.toLowerCase()) {\n        curDefaultLocale = item.defaultLocale\n        curLocales = item.locales\n        break\n      }\n    }\n  }\n\n  return {\n    defaultLocale: curDefaultLocale,\n    locales: curLocales,\n  }\n}\n"]}