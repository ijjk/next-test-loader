{"version":3,"sources":["../../../next-server/server/config.ts"],"names":["targets","reactModes","defaultConfig","env","webpack","webpackDevMiddleware","distDir","assetPrefix","configOrigin","useFileSystemPublicRoutes","generateBuildId","generateEtags","pageExtensions","target","poweredByHeader","compress","images","sizes","domains","hosts","default","path","devIndicators","buildActivity","autoPrerender","onDemandEntries","maxInactiveAge","pagesBufferLength","amp","canonicalBase","basePath","sassOptions","trailingSlash","experimental","cpus","Math","max","Number","process","CIRCLE_NODE_TOTAL","os","length","modern","plugins","profiling","sprFlushToDisk","reactMode","workerThreads","pageEnv","productionBrowserSourceMaps","optimizeFonts","optimizeImages","scrollRestoration","i18n","analyticsId","VERCEL_ANALYTICS_ID","future","excludeDefaultMomentLocales","serverRuntimeConfig","publicRuntimeConfig","reactStrictMode","experimentalWarning","Log","warn","chalk","bold","console","assignDefaults","userConfig","exportTrailingSlash","yellow","config","Object","keys","reduce","currentConfig","key","value","undefined","Error","userDistDir","trim","Array","isArray","forEach","ext","constructor","c","k","v","result","startsWith","endsWith","invalid","filter","d","join","i18nType","locales","defaultLocaleType","defaultLocale","invalidDomainItems","item","domain","map","JSON","stringify","invalidLocales","locale","includes","localeDetectionType","localeDetection","normalizeConfig","phase","then","loadConfig","dir","customConfig","findUp","sync","CONFIG_FILE","cwd","userConfigModule","require","slice","configFile","configBaseName","nonJsPath","isTargetLikeServerless","isServerless","isServerlessTrace"],"mappings":"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","sourcesContent":["import chalk from 'next/dist/compiled/chalk'\nimport findUp from 'next/dist/compiled/find-up'\nimport os from 'os'\nimport { basename, extname } from 'path'\nimport * as Log from '../../build/output/log'\nimport { CONFIG_FILE } from '../lib/constants'\nimport { execOnce } from '../lib/utils'\n\nconst targets = ['server', 'serverless', 'experimental-serverless-trace']\nconst reactModes = ['legacy', 'blocking', 'concurrent']\n\nconst defaultConfig: { [key: string]: any } = {\n  env: [],\n  webpack: null,\n  webpackDevMiddleware: null,\n  distDir: '.next',\n  assetPrefix: '',\n  configOrigin: 'default',\n  useFileSystemPublicRoutes: true,\n  generateBuildId: () => null,\n  generateEtags: true,\n  pageExtensions: ['tsx', 'ts', 'jsx', 'js'],\n  target: 'server',\n  poweredByHeader: true,\n  compress: true,\n  images: {\n    sizes: [320, 420, 768, 1024, 1200],\n    domains: [],\n    hosts: { default: { path: '/_next/image' } },\n  },\n  devIndicators: {\n    buildActivity: true,\n    autoPrerender: true,\n  },\n  onDemandEntries: {\n    maxInactiveAge: 60 * 1000,\n    pagesBufferLength: 2,\n  },\n  amp: {\n    canonicalBase: '',\n  },\n  basePath: '',\n  sassOptions: {},\n  trailingSlash: false,\n  experimental: {\n    cpus: Math.max(\n      1,\n      (Number(process.env.CIRCLE_NODE_TOTAL) ||\n        (os.cpus() || { length: 1 }).length) - 1\n    ),\n    modern: false,\n    plugins: false,\n    profiling: false,\n    sprFlushToDisk: true,\n    reactMode: 'legacy',\n    workerThreads: false,\n    pageEnv: false,\n    productionBrowserSourceMaps: false,\n    optimizeFonts: false,\n    optimizeImages: false,\n    scrollRestoration: false,\n    i18n: false,\n    analyticsId: process.env.VERCEL_ANALYTICS_ID || '',\n  },\n  future: {\n    excludeDefaultMomentLocales: false,\n  },\n  serverRuntimeConfig: {},\n  publicRuntimeConfig: {},\n  reactStrictMode: false,\n}\n\nconst experimentalWarning = execOnce(() => {\n  Log.warn(chalk.bold('You have enabled experimental feature(s).'))\n  Log.warn(\n    `Experimental features are not covered by semver, and may cause unexpected or broken application behavior. ` +\n      `Use them at your own risk.`\n  )\n  console.warn()\n})\n\nfunction assignDefaults(userConfig: { [key: string]: any }) {\n  if (typeof userConfig.exportTrailingSlash !== 'undefined') {\n    console.warn(\n      chalk.yellow.bold('Warning: ') +\n        'The \"exportTrailingSlash\" option has been renamed to \"trailingSlash\". Please update your next.config.js.'\n    )\n    if (typeof userConfig.trailingSlash === 'undefined') {\n      userConfig.trailingSlash = userConfig.exportTrailingSlash\n    }\n    delete userConfig.exportTrailingSlash\n  }\n\n  const config = Object.keys(userConfig).reduce<{ [key: string]: any }>(\n    (currentConfig, key) => {\n      const value = userConfig[key]\n\n      if (value === undefined || value === null) {\n        return currentConfig\n      }\n\n      if (key === 'experimental' && value && value !== defaultConfig[key]) {\n        experimentalWarning()\n      }\n\n      if (key === 'distDir') {\n        if (typeof value !== 'string') {\n          throw new Error(\n            `Specified distDir is not a string, found type \"${typeof value}\"`\n          )\n        }\n        const userDistDir = value.trim()\n\n        // don't allow public as the distDir as this is a reserved folder for\n        // public files\n        if (userDistDir === 'public') {\n          throw new Error(\n            `The 'public' directory is reserved in Next.js and can not be set as the 'distDir'. https://err.sh/vercel/next.js/can-not-output-to-public`\n          )\n        }\n        // make sure distDir isn't an empty string as it can result in the provided\n        // directory being deleted in development mode\n        if (userDistDir.length === 0) {\n          throw new Error(\n            `Invalid distDir provided, distDir can not be an empty string. Please remove this config or set it to undefined`\n          )\n        }\n      }\n\n      if (key === 'pageExtensions') {\n        if (!Array.isArray(value)) {\n          throw new Error(\n            `Specified pageExtensions is not an array of strings, found \"${value}\". Please update this config or remove it.`\n          )\n        }\n\n        if (!value.length) {\n          throw new Error(\n            `Specified pageExtensions is an empty array. Please update it with the relevant extensions or remove it.`\n          )\n        }\n\n        value.forEach((ext) => {\n          if (typeof ext !== 'string') {\n            throw new Error(\n              `Specified pageExtensions is not an array of strings, found \"${ext}\" of type \"${typeof ext}\". Please update this config or remove it.`\n            )\n          }\n        })\n      }\n\n      if (!!value && value.constructor === Object) {\n        currentConfig[key] = {\n          ...defaultConfig[key],\n          ...Object.keys(value).reduce<any>((c, k) => {\n            const v = value[k]\n            if (v !== undefined && v !== null) {\n              c[k] = v\n            }\n            return c\n          }, {}),\n        }\n      } else {\n        currentConfig[key] = value\n      }\n\n      return currentConfig\n    },\n    {}\n  )\n\n  const result = { ...defaultConfig, ...config }\n\n  if (typeof result.assetPrefix !== 'string') {\n    throw new Error(\n      `Specified assetPrefix is not a string, found type \"${typeof result.assetPrefix}\" https://err.sh/vercel/next.js/invalid-assetprefix`\n    )\n  }\n\n  if (typeof result.basePath !== 'string') {\n    throw new Error(\n      `Specified basePath is not a string, found type \"${typeof result.basePath}\"`\n    )\n  }\n\n  if (result.basePath !== '') {\n    if (result.basePath === '/') {\n      throw new Error(\n        `Specified basePath /. basePath has to be either an empty string or a path prefix\"`\n      )\n    }\n\n    if (!result.basePath.startsWith('/')) {\n      throw new Error(\n        `Specified basePath has to start with a /, found \"${result.basePath}\"`\n      )\n    }\n\n    if (result.basePath !== '/') {\n      if (result.basePath.endsWith('/')) {\n        throw new Error(\n          `Specified basePath should not end with /, found \"${result.basePath}\"`\n        )\n      }\n\n      if (result.assetPrefix === '') {\n        result.assetPrefix = result.basePath\n      }\n\n      if (result.amp.canonicalBase === '') {\n        result.amp.canonicalBase = result.basePath\n      }\n    }\n  }\n\n  if (result?.images) {\n    const { images } = result\n\n    // Normalize defined image host to end in slash\n    if (images?.path) {\n      if (images.path[images.path.length - 1] !== '/') {\n        images.path += '/'\n      }\n    }\n\n    if (typeof images !== 'object') {\n      throw new Error(\n        `Specified images should be an object received ${typeof images}`\n      )\n    }\n    if (images.domains) {\n      if (!Array.isArray(images.domains)) {\n        throw new Error(\n          `Specified images.domains should be an Array received ${typeof images.domains}`\n        )\n      }\n      const invalid = images.domains.filter(\n        (d: unknown) => typeof d !== 'string'\n      )\n      if (invalid.length > 0) {\n        throw new Error(\n          `Specified images.domains should be an Array of strings received invalid values (${invalid.join(\n            ', '\n          )})`\n        )\n      }\n    }\n    if (images.sizes) {\n      if (!Array.isArray(images.sizes)) {\n        throw new Error(\n          `Specified images.sizes should be an Array received ${typeof images.sizes}`\n        )\n      }\n      const invalid = images.sizes.filter((d: unknown) => typeof d !== 'number')\n      if (invalid.length > 0) {\n        throw new Error(\n          `Specified images.sizes should be an Array of numbers received invalid values (${invalid.join(\n            ', '\n          )})`\n        )\n      }\n    }\n  }\n\n  if (result.experimental?.i18n) {\n    const { i18n } = result.experimental\n    const i18nType = typeof i18n\n\n    if (i18nType !== 'object') {\n      throw new Error(`Specified i18n should be an object received ${i18nType}`)\n    }\n\n    if (!Array.isArray(i18n.locales)) {\n      throw new Error(\n        `Specified i18n.locales should be an Array received ${typeof i18n.locales}`\n      )\n    }\n\n    const defaultLocaleType = typeof i18n.defaultLocale\n\n    if (!i18n.defaultLocale || defaultLocaleType !== 'string') {\n      throw new Error(`Specified i18n.defaultLocale should be a string`)\n    }\n\n    if (typeof i18n.domains !== 'undefined' && !Array.isArray(i18n.domains)) {\n      throw new Error(\n        `Specified i18n.domains must be an array of domain objects e.g. [ { domain: 'example.fr', defaultLocale: 'fr', locales: ['fr'] } ] received ${typeof i18n.domains}`\n      )\n    }\n\n    if (i18n.domains) {\n      const invalidDomainItems = i18n.domains.filter((item: any) => {\n        if (!item || typeof item !== 'object') return true\n        if (!item.defaultLocale) return true\n        if (!item.domain || typeof item.domain !== 'string') return true\n\n        return false\n      })\n\n      if (invalidDomainItems.length > 0) {\n        throw new Error(\n          `Invalid i18n.domains values:\\n${invalidDomainItems\n            .map((item: any) => JSON.stringify(item))\n            .join(\n              '\\n'\n            )}\\n\\ndomains value must follow format { domain: 'example.fr', defaultLocale: 'fr', locales: ['fr'] }`\n        )\n      }\n    }\n\n    if (!Array.isArray(i18n.locales)) {\n      throw new Error(\n        `Specified i18n.locales must be an array of locale strings e.g. [\"en-US\", \"nl-NL\"] received ${typeof i18n.locales}`\n      )\n    }\n\n    const invalidLocales = i18n.locales.filter(\n      (locale: any) => typeof locale !== 'string'\n    )\n\n    if (invalidLocales.length > 0) {\n      throw new Error(\n        `Specified i18n.locales contains invalid values, locales must be valid locale tags provided as strings e.g. \"en-US\".\\n` +\n          `See here for list of valid language sub-tags: http://www.iana.org/assignments/language-subtag-registry/language-subtag-registry`\n      )\n    }\n\n    if (!i18n.locales.includes(i18n.defaultLocale)) {\n      throw new Error(\n        `Specified i18n.defaultLocale should be included in i18n.locales`\n      )\n    }\n\n    // make sure default Locale is at the front\n    i18n.locales = [\n      i18n.defaultLocale,\n      ...i18n.locales.filter((locale: string) => locale !== i18n.defaultLocale),\n    ]\n\n    const localeDetectionType = typeof i18n.locales.localeDetection\n\n    if (\n      localeDetectionType !== 'boolean' &&\n      localeDetectionType !== 'undefined'\n    ) {\n      throw new Error(\n        `Specified i18n.localeDetection should be undefined or a boolean received ${localeDetectionType}`\n      )\n    }\n  }\n\n  return result\n}\n\nexport function normalizeConfig(phase: string, config: any) {\n  if (typeof config === 'function') {\n    config = config(phase, { defaultConfig })\n\n    if (typeof config.then === 'function') {\n      throw new Error(\n        '> Promise returned in next config. https://err.sh/vercel/next.js/promise-in-next-config'\n      )\n    }\n  }\n  return config\n}\n\nexport default function loadConfig(\n  phase: string,\n  dir: string,\n  customConfig?: object | null\n) {\n  if (customConfig) {\n    return assignDefaults({ configOrigin: 'server', ...customConfig })\n  }\n  const path = findUp.sync(CONFIG_FILE, {\n    cwd: dir,\n  })\n\n  // If config file was found\n  if (path?.length) {\n    const userConfigModule = require(path)\n    const userConfig = normalizeConfig(\n      phase,\n      userConfigModule.default || userConfigModule\n    )\n\n    if (Object.keys(userConfig).length === 0) {\n      Log.warn(\n        'Detected next.config.js, no exported configuration found. https://err.sh/vercel/next.js/empty-configuration'\n      )\n    }\n\n    if (userConfig.target && !targets.includes(userConfig.target)) {\n      throw new Error(\n        `Specified target is invalid. Provided: \"${\n          userConfig.target\n        }\" should be one of ${targets.join(', ')}`\n      )\n    }\n\n    if (userConfig.amp?.canonicalBase) {\n      const { canonicalBase } = userConfig.amp || ({} as any)\n      userConfig.amp = userConfig.amp || {}\n      userConfig.amp.canonicalBase =\n        (canonicalBase.endsWith('/')\n          ? canonicalBase.slice(0, -1)\n          : canonicalBase) || ''\n    }\n\n    if (\n      userConfig.experimental?.reactMode &&\n      !reactModes.includes(userConfig.experimental.reactMode)\n    ) {\n      throw new Error(\n        `Specified React Mode is invalid. Provided: ${\n          userConfig.experimental.reactMode\n        } should be one of ${reactModes.join(', ')}`\n      )\n    }\n\n    return assignDefaults({\n      configOrigin: CONFIG_FILE,\n      configFile: path,\n      ...userConfig,\n    })\n  } else {\n    const configBaseName = basename(CONFIG_FILE, extname(CONFIG_FILE))\n    const nonJsPath = findUp.sync(\n      [\n        `${configBaseName}.jsx`,\n        `${configBaseName}.ts`,\n        `${configBaseName}.tsx`,\n        `${configBaseName}.json`,\n      ],\n      { cwd: dir }\n    )\n    if (nonJsPath?.length) {\n      throw new Error(\n        `Configuring Next.js via '${basename(\n          nonJsPath\n        )}' is not supported. Please replace the file with 'next.config.js'.`\n      )\n    }\n  }\n\n  return defaultConfig\n}\n\nexport function isTargetLikeServerless(target: string) {\n  const isServerless = target === 'serverless'\n  const isServerlessTrace = target === 'experimental-serverless-trace'\n  return isServerless || isServerlessTrace\n}\n"]}