{"version":3,"sources":["../../server/config-shared.ts"],"names":["defaultConfig","env","webpack","webpackDevMiddleware","distDir","cleanDistDir","assetPrefix","configOrigin","useFileSystemPublicRoutes","generateBuildId","generateEtags","pageExtensions","target","poweredByHeader","compress","analyticsId","process","VERCEL_ANALYTICS_ID","images","imageConfigDefault","devIndicators","buildActivity","onDemandEntries","maxInactiveAge","pagesBufferLength","amp","canonicalBase","basePath","sassOptions","trailingSlash","i18n","productionBrowserSourceMaps","optimizeFonts","webpack5","Number","NEXT_PRIVATE_TEST_WEBPACK4_MODE","undefined","excludeDefaultMomentLocales","serverRuntimeConfig","publicRuntimeConfig","reactStrictMode","experimental","cpus","Math","max","CIRCLE_NODE_TOTAL","os","length","plugins","profiling","sprFlushToDisk","workerThreads","pageEnv","optimizeImages","optimizeCss","scrollRestoration","stats","externalDir","reactRoot","NEXT_PRIVATE_REACT_ROOT","disableOptimizedLoading","gzipSize","craCompat","esmExternals","future","strictPostcssConfiguration","normalizeConfig","phase","config","then","Error"],"mappings":"0GAAA,8CAEA,2C,mFAiGO,KAAMA,CAAAA,aAAyB,CAAG,CACvCC,GAAG,CAAE,EADkC,CAEvCC,OAAO,CAAE,IAF8B,CAGvCC,oBAAoB,CAAE,IAHiB,CAIvCC,OAAO,CAAE,OAJ8B,CAKvCC,YAAY,CAAE,IALyB,CAMvCC,WAAW,CAAE,EAN0B,CAOvCC,YAAY,CAAE,SAPyB,CAQvCC,yBAAyB,CAAE,IARY,CASvCC,eAAe,CAAE,IAAM,IATgB,CAUvCC,aAAa,CAAE,IAVwB,CAWvCC,cAAc,CAAE,CAAC,KAAD,CAAQ,IAAR,CAAc,KAAd,CAAqB,IAArB,CAXuB,CAYvCC,MAAM,CAAE,QAZ+B,CAavCC,eAAe,CAAE,IAbsB,CAcvCC,QAAQ,CAAE,IAd6B,CAevCC,WAAW,CAAEC,OAAO,CAACf,GAAR,CAAYgB,mBAAZ,EAAmC,EAfT,CAgBvCC,MAAM,CAAEC,+BAhB+B,CAiBvCC,aAAa,CAAE,CACbC,aAAa,CAAE,IADF,CAjBwB,CAoBvCC,eAAe,CAAE,CACfC,cAAc,CAAE,GAAK,IADN,CAEfC,iBAAiB,CAAE,CAFJ,CApBsB,CAwBvCC,GAAG,CAAE,CACHC,aAAa,CAAE,EADZ,CAxBkC,CA2BvCC,QAAQ,CAAE,EA3B6B,CA4BvCC,WAAW,CAAE,EA5B0B,CA6BvCC,aAAa,CAAE,KA7BwB,CA8BvCC,IAAI,CAAE,IA9BiC,CA+BvCC,2BAA2B,CAAE,KA/BU,CAgCvCC,aAAa,CAAE,IAhCwB,CAiCvCC,QAAQ,CACNC,MAAM,CAAClB,OAAO,CAACf,GAAR,CAAYkC,+BAAb,CAAN,CAAsD,CAAtD,CAA0D,KAA1D,CAAkEC,SAlC7B,CAmCvCC,2BAA2B,CAAE,IAnCU,CAoCvCC,mBAAmB,CAAE,EApCkB,CAqCvCC,mBAAmB,CAAE,EArCkB,CAsCvCC,eAAe,CAAE,KAtCsB,CAuCvCC,YAAY,CAAE,CACZC,IAAI,CAAEC,IAAI,CAACC,GAAL,CACJ,CADI,CAEJ,CAACV,MAAM,CAAClB,OAAO,CAACf,GAAR,CAAY4C,iBAAb,CAAN,EACC,CAACC,YAAGJ,IAAH,IAAa,CAAEK,MAAM,CAAE,CAAV,CAAd,EAA6BA,MAD/B,EACyC,CAHrC,CADM,CAMZC,OAAO,CAAE,KANG,CAOZC,SAAS,CAAE,KAPC,CAQZC,cAAc,CAAE,IARJ,CASZC,aAAa,CAAE,KATH,CAUZC,OAAO,CAAE,KAVG,CAWZC,cAAc,CAAE,KAXJ,CAYZC,WAAW,CAAE,KAZD,CAaZC,iBAAiB,CAAE,KAbP,CAcZC,KAAK,CAAE,KAdK,CAeZC,WAAW,CAAE,KAfD,CAgBZC,SAAS,CAAExB,MAAM,CAAClB,OAAO,CAACf,GAAR,CAAY0D,uBAAb,CAAN,CAA8C,CAhB7C,CAiBZC,uBAAuB,CAAE,KAjBb,CAkBZC,QAAQ,CAAE,IAlBE,CAmBZC,SAAS,CAAE,KAnBC,CAoBZC,YAAY,CAAE,KApBF,CAvCyB,CA6DvCC,MAAM,CAAE,CACNC,0BAA0B,CAAE,KADtB,CA7D+B,CAAlC,C,oCAkEA,QAASC,CAAAA,eAAT,CAAyBC,KAAzB,CAAwCC,MAAxC,CAAqD,CAC1D,GAAI,MAAOA,CAAAA,MAAP,GAAkB,UAAtB,CAAkC,CAChCA,MAAM,CAAGA,MAAM,CAACD,KAAD,CAAQ,CAAEnE,aAAF,CAAR,CAAf,CAEA,GAAI,MAAOoE,CAAAA,MAAM,CAACC,IAAd,GAAuB,UAA3B,CAAuC,CACrC,KAAM,IAAIC,CAAAA,KAAJ,CACJ,4FADI,CAAN,CAGD,CACF,CACD,MAAOF,CAAAA,MAAP,CACD","sourcesContent":["import os from 'os'\nimport { Header, Redirect, Rewrite } from '../lib/load-custom-routes'\nimport { ImageConfig, imageConfigDefault } from './image-config'\n\nexport type DomainLocales = Array<{\n  http?: true\n  domain: string\n  locales?: string[]\n  defaultLocale: string\n}>\n\ntype NoOptionals<T> = {\n  [P in keyof T]-?: T[P]\n}\n\nexport type NextConfigComplete = NoOptionals<NextConfig>\n\nexport type NextConfig = { [key: string]: any } & {\n  i18n?: {\n    locales: string[]\n    defaultLocale: string\n    domains?: DomainLocales\n    localeDetection?: false\n  } | null\n\n  headers?: () => Promise<Header[]>\n  rewrites?: () => Promise<\n    | Rewrite[]\n    | {\n        beforeFiles: Rewrite[]\n        afterFiles: Rewrite[]\n        fallback: Rewrite[]\n      }\n  >\n  redirects?: () => Promise<Redirect[]>\n\n  webpack5?: false\n  excludeDefaultMomentLocales?: boolean\n\n  trailingSlash?: boolean\n  env?: { [key: string]: string }\n  distDir?: string\n  cleanDistDir?: boolean\n  assetPrefix?: string\n  useFileSystemPublicRoutes?: boolean\n  generateBuildId: () => string | null\n  generateEtags?: boolean\n  pageExtensions?: string[]\n  compress?: boolean\n  images?: ImageConfig\n  devIndicators?: {\n    buildActivity?: boolean\n  }\n  onDemandEntries?: {\n    maxInactiveAge?: number\n    pagesBufferLength?: number\n  }\n  amp?: {\n    canonicalBase?: string\n  }\n  basePath?: string\n  sassOptions?: { [key: string]: any }\n  productionBrowserSourceMaps?: boolean\n  optimizeFonts?: boolean\n\n  future: {\n    /**\n     * @deprecated this options was moved to the top level\n     */\n    webpack5?: false\n    strictPostcssConfiguration?: boolean\n  }\n  experimental: {\n    cpus?: number\n    plugins?: boolean\n    profiling?: boolean\n    sprFlushToDisk?: boolean\n    reactMode?: 'legacy' | 'concurrent' | 'blocking'\n    workerThreads?: boolean\n    pageEnv?: boolean\n    optimizeImages?: boolean\n    optimizeCss?: boolean\n    scrollRestoration?: boolean\n    stats?: boolean\n    externalDir?: boolean\n    conformance?: boolean\n    amp?: {\n      optimizer?: any\n      validator?: string\n      skipValidation?: boolean\n    }\n    reactRoot?: boolean\n    disableOptimizedLoading?: boolean\n    gzipSize?: boolean\n    craCompat?: boolean\n    esmExternals?: boolean | 'loose'\n  }\n}\n\nexport const defaultConfig: NextConfig = {\n  env: {},\n  webpack: null,\n  webpackDevMiddleware: null,\n  distDir: '.next',\n  cleanDistDir: true,\n  assetPrefix: '',\n  configOrigin: 'default',\n  useFileSystemPublicRoutes: true,\n  generateBuildId: () => null,\n  generateEtags: true,\n  pageExtensions: ['tsx', 'ts', 'jsx', 'js'],\n  target: 'server',\n  poweredByHeader: true,\n  compress: true,\n  analyticsId: process.env.VERCEL_ANALYTICS_ID || '',\n  images: imageConfigDefault,\n  devIndicators: {\n    buildActivity: true,\n  },\n  onDemandEntries: {\n    maxInactiveAge: 60 * 1000,\n    pagesBufferLength: 2,\n  },\n  amp: {\n    canonicalBase: '',\n  },\n  basePath: '',\n  sassOptions: {},\n  trailingSlash: false,\n  i18n: null,\n  productionBrowserSourceMaps: false,\n  optimizeFonts: true,\n  webpack5:\n    Number(process.env.NEXT_PRIVATE_TEST_WEBPACK4_MODE) > 0 ? false : undefined,\n  excludeDefaultMomentLocales: true,\n  serverRuntimeConfig: {},\n  publicRuntimeConfig: {},\n  reactStrictMode: false,\n  experimental: {\n    cpus: Math.max(\n      1,\n      (Number(process.env.CIRCLE_NODE_TOTAL) ||\n        (os.cpus() || { length: 1 }).length) - 1\n    ),\n    plugins: false,\n    profiling: false,\n    sprFlushToDisk: true,\n    workerThreads: false,\n    pageEnv: false,\n    optimizeImages: false,\n    optimizeCss: false,\n    scrollRestoration: false,\n    stats: false,\n    externalDir: false,\n    reactRoot: Number(process.env.NEXT_PRIVATE_REACT_ROOT) > 0,\n    disableOptimizedLoading: false,\n    gzipSize: true,\n    craCompat: false,\n    esmExternals: false,\n  },\n  future: {\n    strictPostcssConfiguration: false,\n  },\n}\n\nexport function normalizeConfig(phase: string, config: any) {\n  if (typeof config === 'function') {\n    config = config(phase, { defaultConfig })\n\n    if (typeof config.then === 'function') {\n      throw new Error(\n        '> Promise returned in next config. https://nextjs.org/docs/messages/promise-in-next-config'\n      )\n    }\n  }\n  return config\n}\n"]}